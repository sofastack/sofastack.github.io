<!DOCTYPE html>
<html>

<head>
	<title>
	Use class isolation in SOFABoot · SOFAStack
</title>
	<meta charset="utf-8">
<meta http-equiv="X-UA-Compatible" content="IE=edge,chrome=1">
<meta name="viewport" content="width=device-width,minimum-scale=1">
<meta name="description" content="SOFAStack is a Scalable Open Financial Architecture for building cloud native applications" />

<meta name="generator" content="Hugo 0.55.5" /><link rel="shortcut icon" href=https://gw.alipayobjects.com/os/q/cms/images/jqu9346l/4ba95631-2489-4885-881f-bc7f8d787d5e_w64_h61.png type="image/png">

<link href="https://unpkg.com/purecss@1.0.0/build/base-min.css" rel="stylesheet">



<link href="/sofastack.tech/css/main.css" rel="stylesheet">
<link href="/sofastack.tech/css/zoom-image.css" rel="stylesheet">

<script src="/sofastack.tech/js/iconfont.js"></script>
<script src="/sofastack.tech/js/highlight.pack.js"></script>
<script>hljs.initHighlightingOnLoad();</script>


<script>window.SITE_LANGUAGE = "en"</script>
<script src="/sofastack.tech/js/app.js"></script>





<script type="application/javascript">
var doNotTrack = false;
if (!doNotTrack) {
	(function(i,s,o,g,r,a,m){i['GoogleAnalyticsObject']=r;i[r]=i[r]||function(){
	(i[r].q=i[r].q||[]).push(arguments)},i[r].l=1*new Date();a=s.createElement(o),
	m=s.getElementsByTagName(o)[0];a.async=1;a.src=g;m.parentNode.insertBefore(a,m)
	})(window,document,'script','https://www.google-analytics.com/analytics.js','ga');
	ga('create', 'UA-142131411-1', 'auto');
	
	ga('send', 'pageview');
}
</script>

</head>

<body>
	<header class="ss-header">
	<nav class="navbar" role="navigation" aria-label="main navigation">
		<div class="navbar-brand">
			<a class="logo-link" href="/sofastack.tech/en/">
				<img class="logo" src="/sofastack.tech/img/logo.png">
			</a>
			<div class="-show-mobile">
				<a id="mobile-menu-icon">
					<svg class="icon" aria-hidden="true">
						<use xlink:href="#icon-menu"></use>
					</svg>
				</a>
				<nav id="mobile-menu">
						<div id="js-menu-search-mobile" class="navbar-search-mobile">
							<input class="input" placeholder="Search">
							<svg class="icon" aria-hidden="true">
								<use xlink:href="#icon-search"></use>
							</svg>
						</div>
					
          
            <a
              class=""
              href="/sofastack.tech/en/projects/">
              <span>
                Projects
              </span>
              <svg class="icon" aria-hidden="true"><use xlink:href="#icon-ARROW"></use></svg>
            </a>
					
            <a
              class=""
              href="/sofastack.tech/en/guides/">
              <span>
                Guides
              </span>
              <svg class="icon" aria-hidden="true"><use xlink:href="#icon-ARROW"></use></svg>
            </a>
					
            <a
              class=""
              href="/sofastack.tech/en/blog/">
              <span>
                Blog
              </span>
              <svg class="icon" aria-hidden="true"><use xlink:href="#icon-ARROW"></use></svg>
            </a>
					
            <a
              class=""
              href="/sofastack.tech/en/activities/">
              <span>
                Activity
              </span>
              <svg class="icon" aria-hidden="true"><use xlink:href="#icon-ARROW"></use></svg>
            </a>
					
            <a
              class=""
              href="/sofastack.tech/awesome/">
              <span>
                Awesome SOFA
              </span>
              <svg class="icon" aria-hidden="true"><use xlink:href="#icon-ARROW"></use></svg>
            </a>
					
					
            
              <a href="/sofastack.tech/projects/sofa-boot/classloader-isolation/">
                <span>中文</span>
                <svg class="icon" aria-hidden="true"><use xlink:href="#icon-transfer"></use></svg>
              </a>
						
					
				</nav>
			</div>
		</div>

		<div class="navbar-menu -hidden-mobile">
			<div class="navbar-start">
				
				
					<a class="navbar-item "
						href="/sofastack.tech/en/projects/">Projects</a>
				
					<a class="navbar-item "
						href="/sofastack.tech/en/guides/">Guides</a>
				
					<a class="navbar-item "
						href="/sofastack.tech/en/blog/">Blog</a>
				
					<a class="navbar-item "
						href="/sofastack.tech/en/activities/">Activity</a>
				
					<a class="navbar-item "
						href="/sofastack.tech/awesome/">Awesome SOFA</a>
				
			</div>
			<div class="navbar-end">
				<div class="navbar-item">
					<div id="js-menu-search" class="navbar-search">
						<input class="input" placeholder="Search">
						<svg class="icon" aria-hidden="true">
							<use xlink:href="#icon-search"></use>
						</svg>
					</div>
				</div>
				<div class="navbar-item">
					
						
							<a class="translation" href="/sofastack.tech/projects/sofa-boot/classloader-isolation/">中</a>
						
					
				</div>
			</div>
		</div>
	</nav>
</header>


	

	

	

	

	



	

<div class="ss-layout-container">
	<aside class="ss-layout-aside -left ss-card -soft-hidden">
		






	<div id="js-drawer" class="ss-toc">
		<div id="js-drawer-handle" class="drawer-handle">
			<svg class="icon icon-menu" aria-hidden="true">
				<use xlink:href="#icon-menu"></use>
			</svg>
			<svg class="icon icon-close" aria-hidden="true">
				<use xlink:href="#icon-close"></use>
			</svg>
		</div>
		<div class="drawer-body">
			<div class="header" title="SOFABoot is a development framework based on Spring Boot, provides capabilities such as Readiness Check, class isolation, log space isolation and asynchronous initialization of bean.">SOFABoot

































































































































































































































































































































































































































































































<div class="ss-toc-list-card -hidden-mobile">
	<svg class="icon -hidden-mobile" aria-hidden="true">
		<use xlink:href="#icon-menu1"></use>
	</svg>
	<div class="ss-tooltip">
		
		
		<div class="toc-list">
			<h4 class="title">Main Projects</h4>
			<ul class="list">
				
				<li class="item">
					
					
					
					
					<a href=/sofastack.tech/en/projects/sofa-boot/overview/>
						SOFABoot
					</a>
				</li>
				
				<li class="item">
					
					
					
					
					<a href=/sofastack.tech/en/projects/sofa-rpc/overview/>
						SOFARPC
					</a>
				</li>
				
				<li class="item">
					
					
					
					
					<a href=/sofastack.tech/en/projects/sofa-tracer/overview/>
						SOFATracer
					</a>
				</li>
				
				<li class="item">
					
					
					
					
					<a href=/sofastack.tech/en/projects/sofa-lookout/overview/>
						SOFALookout
					</a>
				</li>
				
				<li class="item">
					
					
					
					
					<a href=/sofastack.tech/en/projects/sofa-registry/overview/>
						SOFARegistry
					</a>
				</li>
				
			</ul>
		</div>
		
		
		
		<div class="toc-list">
			<h4 class="title">Incubating Projects</h4>
			<ul class="list">
				
				<li class="item">
					
					
					
					
					<a href=/sofastack.tech/en/projects/sofa-mesh/overview/>
						SOFAMesh
					</a>
				</li>
				
				<li class="item">
					
					
					
					
					<a href=/sofastack.tech/en/projects/sofa-dashboard/overview/>
						SOFADashboard
					</a>
				</li>
				
			</ul>
		</div>
		
		
		
		<div class="toc-list">
			<h4 class="title">Tool Projects</h4>
			<ul class="list">
				
				<li class="item">
					
					
					
					
					<a href=/sofastack.tech/en/projects/sofa-bolt/overview/>
						SOFABolt
					</a>
				</li>
				
				<li class="item">
					
					
					
					
					<a href=/sofastack.tech/en/projects/sofa-jraft/overview/>
						SOFAJRaft
					</a>
				</li>
				
				<li class="item">
					
					
					
					
					<a href=/sofastack.tech/en/projects/sofa-acts/overview/>
						SOFAActs
					</a>
				</li>
				
				<li class="item">
					
					
					
					
					
					
					<a href=https://www.sofastack.tech/en/projects/sofa-boot/sofa-ark-readme//>
						SOFAArk
					</a>
				</li>
				
			</ul>
		</div>
		
		
		
		<div class="toc-list">
			<h4 class="title">Ecosystem Projects</h4>
			<ul class="list">
				
				<li class="item">
					
					
					
					
					
					
					<a href=https://mosn.io/en/>
						MOSN
					</a>
				</li>
				
				<li class="item">
					
					
					
					
					
					
					<a href=https://occlum.io/>
						Occlum
					</a>
				</li>
				
				<li class="item">
					
					
					
					
					
					
					<a href=https://seata.io/>
						Seata
					</a>
				</li>
				
				<li class="item">
					
					
					
					
					
					
					<a href=https://mosn.io/layotto/>
						Layotto
					</a>
				</li>
				
			</ul>
		</div>
		
		
	</div>
</div>

			</div>
			<div class="body">
				



<ul class="leaf-section">
	
		
			<li class="item">
				<div class="link">
					<a
						title="SOFABoot overview"
						href="/sofastack.tech/en/projects/sofa-boot/overview/"
					>SOFABoot overview</a>
				</div>
			</li>
		
		
	
		
			<li class="item">
				<div class="link">
					<a
						title="Quick start guide"
						href="/sofastack.tech/en/projects/sofa-boot/quick-start/"
					>Quick start guide</a>
				</div>
			</li>
		
		
	
		
			<li class="item">
				<div class="link">
					<a
						title="Dependency management"
						href="/sofastack.tech/en/projects/sofa-boot/dependency-management/"
					>Dependency management</a>
				</div>
			</li>
		
		
	
		
			<li class="item">
				<div class="link">
					<a
						title="Health check"
						href="/sofastack.tech/en/projects/sofa-boot/health-check/"
					>Health check</a>
				</div>
			</li>
		
		
	
		
			<li class="item">
				<div class="link">
					<a
						title="View version"
						href="/sofastack.tech/en/projects/sofa-boot/view-versions/"
					>View version</a>
				</div>
			</li>
		
		
	
		
		
			<li class="item">
				<div class="link">
					<svg class="icon arrow" aria-hidden="true">
						<use xlink:href="#icon-arrow"></use>
					</svg>
					<a
						title="Module isolation"
					>Module isolation</a>
				</div>
				



<ul class="leaf-section">
	
		
			<li class="item">
				<div class="link">
					<a
						title="Modular development"
						href="/sofastack.tech/en/projects/sofa-boot/modular-development/"
					>Modular development</a>
				</div>
			</li>
		
		
	
		
			<li class="item">
				<div class="link">
					<a
						title="Module configuration"
						href="/sofastack.tech/en/projects/sofa-boot/sofaboot-module/"
					>Module configuration</a>
				</div>
			</li>
		
		
	
		
			<li class="item">
				<div class="link">
					<a
						title="Publish and reference JVM services"
						href="/sofastack.tech/en/projects/sofa-boot/module-service/"
					>Publish and reference JVM services</a>
				</div>
			</li>
		
		
	
		
			<li class="item">
				<div class="link">
					<a
						title="Module parallel startup"
						href="/sofastack.tech/en/projects/sofa-boot/parallel-start/"
					>Module parallel startup</a>
				</div>
			</li>
		
		
	
		
			<li class="item">
				<div class="link">
					<a
						title="SOFABoot profile"
						href="/sofastack.tech/en/projects/sofa-boot/sofaboot-profile/"
					>SOFABoot profile</a>
				</div>
			</li>
		
		
	
		
			<li class="item">
				<div class="link">
					<a
						title="SOFABoot extension point"
						href="/sofastack.tech/en/projects/sofa-boot/extension/"
					>SOFABoot extension point</a>
				</div>
			</li>
		
		
	
</ul>
			</li>
		
	
		
		
			<li class="item">
				<div class="link">
					<svg class="icon arrow" aria-hidden="true">
						<use xlink:href="#icon-arrow"></use>
					</svg>
					<a
						title="Class Isolation"
					>Class Isolation</a>
				</div>
				



<ul class="leaf-section">
	
		
			<li class="item">
				<div class="link">
					<a
						title="Introduction to SOFAArk"
						href="/sofastack.tech/en/projects/sofa-boot/sofa-ark-readme/"
					>Introduction to SOFAArk</a>
				</div>
			</li>
		
		
	
		
		
			<li class="item">
				<div class="link">
					<svg class="icon arrow" aria-hidden="true">
						<use xlink:href="#icon-arrow"></use>
					</svg>
					<a
						title="Quick start guide"
					>Quick start guide</a>
				</div>
				



<ul class="leaf-section">
	
		
			<li class="item">
				<div class="link">
					<a
						title="Package into Ark Plugin"
						href="/sofastack.tech/en/projects/sofa-boot/sofa-ark-ark-plugin-demo/"
					>Package into Ark Plugin</a>
				</div>
			</li>
		
		
	
		
			<li class="item">
				<div class="link">
					<a
						title="Package into Ark JAR"
						href="/sofastack.tech/en/projects/sofa-boot/sofa-ark-ark-demo/"
					>Package into Ark JAR</a>
				</div>
			</li>
		
		
	
</ul>
			</li>
		
	
		
		
			<li class="item">
				<div class="link">
					<svg class="icon arrow" aria-hidden="true">
						<use xlink:href="#icon-arrow"></use>
					</svg>
					<a
						title="User guide"
					>User guide</a>
				</div>
				



<ul class="leaf-section">
	
		
			<li class="item">
				<div class="link">
					<a
						title="Terminologies"
						href="/sofastack.tech/en/projects/sofa-boot/sofa-ark-terminology/"
					>Terminologies</a>
				</div>
			</li>
		
		
	
		
			<li class="item">
				<div class="link">
					<a
						title="Ark JAR package"
						href="/sofastack.tech/en/projects/sofa-boot/sofa-ark-ark-jar/"
					>Ark JAR package</a>
				</div>
			</li>
		
		
	
		
			<li class="item">
				<div class="link">
					<a
						title="Ark Plugin"
						href="/sofastack.tech/en/projects/sofa-boot/sofa-ark-ark-plugin/"
					>Ark Plugin</a>
				</div>
			</li>
		
		
	
		
			<li class="item">
				<div class="link">
					<a
						title="Ark Biz"
						href="/sofastack.tech/en/projects/sofa-boot/sofa-ark-ark-biz/"
					>Ark Biz</a>
				</div>
			</li>
		
		
	
		
			<li class="item">
				<div class="link -current">
					<a
						title="Use class isolation in SOFABoot"
						href="/sofastack.tech/en/projects/sofa-boot/classloader-isolation/"
					>Use class isolation in SOFABoot</a>
				</div>
			</li>
		
		
	
</ul>
			</li>
		
	
		
		
			<li class="item">
				<div class="link">
					<svg class="icon arrow" aria-hidden="true">
						<use xlink:href="#icon-arrow"></use>
					</svg>
					<a
						title="Developer guide"
					>Developer guide</a>
				</div>
				



<ul class="leaf-section">
	
		
			<li class="item">
				<div class="link">
					<a
						title="Ark container startup process"
						href="/sofastack.tech/en/projects/sofa-boot/sofa-ark-startup/"
					>Ark container startup process</a>
				</div>
			</li>
		
		
	
		
			<li class="item">
				<div class="link">
					<a
						title="Ark container plugin mechanism"
						href="/sofastack.tech/en/projects/sofa-boot/sofa-ark-plugin/"
					>Ark container plugin mechanism</a>
				</div>
			</li>
		
		
	
		
			<li class="item">
				<div class="link">
					<a
						title="Ark container class loading mechanism"
						href="/sofastack.tech/en/projects/sofa-boot/sofa-ark-classloader/"
					>Ark container class loading mechanism</a>
				</div>
			</li>
		
		
	
</ul>
			</li>
		
	
		
			<li class="item">
				<div class="link">
					<a
						title="Release notes"
						href="/sofastack.tech/en/projects/sofa-boot/sofa-ark-release/"
					>Release notes</a>
				</div>
			</li>
		
		
	
		
			<li class="item">
				<div class="link">
					<a
						title="Roadmap"
						href="/sofastack.tech/en/projects/sofa-boot/sofa-ark-roadmap/"
					>Roadmap</a>
				</div>
			</li>
		
		
	
		
			<li class="item">
				<div class="link">
					<a
						title="Contribution"
						href="/sofastack.tech/en/projects/sofa-boot/sofa-ark-contribution/"
					>Contribution</a>
				</div>
			</li>
		
		
	
</ul>
			</li>
		
	
		
		
			<li class="item">
				<div class="link">
					<svg class="icon arrow" aria-hidden="true">
						<use xlink:href="#icon-arrow"></use>
					</svg>
					<a
						title="Dynamic deployment"
					>Dynamic deployment</a>
				</div>
				



<ul class="leaf-section">
	
		
			<li class="item">
				<div class="link">
					<a
						title="Introduction to Jarslink"
						href="/sofastack.tech/en/projects/sofa-boot/sofa-jarslink-jarslink-readme/"
					>Introduction to Jarslink</a>
				</div>
			</li>
		
		
	
		
		
			<li class="item">
				<div class="link">
					<svg class="icon arrow" aria-hidden="true">
						<use xlink:href="#icon-arrow"></use>
					</svg>
					<a
						title="Quick start guide"
					>Quick start guide</a>
				</div>
				



<ul class="leaf-section">
	
		
			<li class="item">
				<div class="link">
					<a
						title="Create a SOFABoot application"
						href="/sofastack.tech/en/projects/sofa-boot/sofa-jarslink-jarslink-app-demo/"
					>Create a SOFABoot application</a>
				</div>
			</li>
		
		
	
		
			<li class="item">
				<div class="link">
					<a
						title="Use Jarslink for multi-application dynamic deployment"
						href="/sofastack.tech/en/projects/sofa-boot/sofa-jarslink-jarslink-deploy-demo/"
					>Use Jarslink for multi-application dynamic deployment</a>
				</div>
			</li>
		
		
	
		
			<li class="item">
				<div class="link">
					<a
						title="Communicate across applications"
						href="/sofastack.tech/en/projects/sofa-boot/sofa-jarslink-jarslink-invocation-demo/"
					>Communicate across applications</a>
				</div>
			</li>
		
		
	
		
			<li class="item">
				<div class="link">
					<a
						title="Integrate SOFABoot health check"
						href="/sofastack.tech/en/projects/sofa-boot/sofa-jarslink-jarslink-health-demo/"
					>Integrate SOFABoot health check</a>
				</div>
			</li>
		
		
	
</ul>
			</li>
		
	
		
		
			<li class="item">
				<div class="link">
					<svg class="icon arrow" aria-hidden="true">
						<use xlink:href="#icon-arrow"></use>
					</svg>
					<a
						title="User guide"
					>User guide</a>
				</div>
				



<ul class="leaf-section">
	
		
			<li class="item">
				<div class="link">
					<a
						title="Application packaging"
						href="/sofastack.tech/en/projects/sofa-boot/sofa-jarslink-jarslink-repackage/"
					>Application packaging</a>
				</div>
			</li>
		
		
	
		
			<li class="item">
				<div class="link">
					<a
						title="Merged deployment"
						href="/sofastack.tech/en/projects/sofa-boot/sofa-jarslink-jarslink-deploy/"
					>Merged deployment</a>
				</div>
			</li>
		
		
	
		
			<li class="item">
				<div class="link">
					<a
						title="Interactive instruction"
						href="/sofastack.tech/en/projects/sofa-boot/sofa-jarslink-jarslink-instruction/"
					>Interactive instruction</a>
				</div>
			</li>
		
		
	
		
			<li class="item">
				<div class="link">
					<a
						title="Lifecycle"
						href="/sofastack.tech/en/projects/sofa-boot/sofa-jarslink-jarslink-lifecycle/"
					>Lifecycle</a>
				</div>
			</li>
		
		
	
</ul>
			</li>
		
	
		
		
			<li class="item">
				<div class="link">
					<svg class="icon arrow" aria-hidden="true">
						<use xlink:href="#icon-arrow"></use>
					</svg>
					<a
						title="Developer guide"
					>Developer guide</a>
				</div>
				



<ul class="leaf-section">
	
		
			<li class="item">
				<div class="link">
					<a
						title="Compile Jarslink project"
						href="/sofastack.tech/en/projects/sofa-boot/sofa-jarslink-compile/"
					>Compile Jarslink project</a>
				</div>
			</li>
		
		
	
		
			<li class="item">
				<div class="link">
					<a
						title="Architecture"
						href="/sofastack.tech/en/projects/sofa-boot/sofa-jarslink-structure/"
					>Architecture</a>
				</div>
			</li>
		
		
	
		
			<li class="item">
				<div class="link">
					<a
						title="Basic model"
						href="/sofastack.tech/en/projects/sofa-boot/sofa-jarslink-model/"
					>Basic model</a>
				</div>
			</li>
		
		
	
		
			<li class="item">
				<div class="link">
					<a
						title="Version release"
						href="/sofastack.tech/en/projects/sofa-boot/sofa-jarslink-version/"
					>Version release</a>
				</div>
			</li>
		
		
	
</ul>
			</li>
		
	
		
			<li class="item">
				<div class="link">
					<a
						title="Release notes"
						href="/sofastack.tech/en/projects/sofa-boot/sofa-jarslink-release/"
					>Release notes</a>
				</div>
			</li>
		
		
	
		
			<li class="item">
				<div class="link">
					<a
						title="Roadmap"
						href="/sofastack.tech/en/projects/sofa-boot/sofa-jarslink-roadmap/"
					>Roadmap</a>
				</div>
			</li>
		
		
	
		
			<li class="item">
				<div class="link">
					<a
						title="Contribution"
						href="/sofastack.tech/en/projects/sofa-boot/sofa-jarslink-contribution/"
					>Contribution</a>
				</div>
			</li>
		
		
	
</ul>
			</li>
		
	
		
		
			<li class="item">
				<div class="link">
					<svg class="icon arrow" aria-hidden="true">
						<use xlink:href="#icon-arrow"></use>
					</svg>
					<a
						title="Documentation for upgrade"
					>Documentation for upgrade</a>
				</div>
				



<ul class="leaf-section">
	
		
			<li class="item">
				<div class="link">
					<a
						title="SOFABoot 2.5.x upgrade"
						href="/sofastack.tech/en/projects/sofa-boot/upgrade_2_5_x/"
					>SOFABoot 2.5.x upgrade</a>
				</div>
			</li>
		
		
	
		
			<li class="item">
				<div class="link">
					<a
						title="SOFABoot 3.0 upgrade"
						href="/sofastack.tech/en/projects/sofa-boot/upgrade_3_x/"
					>SOFABoot 3.0 upgrade</a>
				</div>
			</li>
		
		
	
</ul>
			</li>
		
	
</ul>
			</div>
		</div>
	</div>

	</aside>

	<main class="ss-layout-main -card">
		




<div class="ss-meta">
	<div class="container">
		<h1 class="title">
			Use class isolation in SOFABoot
		</h1>
		<a class="edit-button -hidden-mobile"
			href="https://github.com/sofastack/sofastack.tech/edit/master/content/en/projects/sofa-boot/classloader-isolation/index.md"
		>Edit</a>
	</div>
	<div class="meta">
		Update time: 2024-06-18 
		
			
		
	</div>
</div>

		<article class="typo">
  <p>SOFABoot provides a class isolation framework SOFAArk, giving Spring Boot a class isolation ability to resolve class or package conflicts in the development. For detailed information, please refer to:<a href="https://github.com/sofastack/sofa-ark">SOFAArk</a></p>

<p>To use this feature in SOFABoot projects, we need only two steps: configure the <code>sofa-ark-maven-plugin</code> plugins for packaging and add <code>sofa-ark-springboot-starter</code> dependencies of the class isolation framework.</p>

<h2 id="configure-maven-packaging-plugins">Configure Maven packaging plugins</h2>

<p>The <code>Maven</code> plugins - <code>sofa-ark-maven-plugin</code> are available on the Central Repository. Through simple configurations, a SpringBoot project can be wrapped into an executable Ark package in the standard format. The coordinate of <code>sofa-ark-maven-plugin</code> is:</p>

<pre><code class="language-xml">&lt;plugin&gt;
    &lt;groupId&gt;com.alipay.sofa&lt;/groupId&gt;
    &lt;artifactId&gt;sofa-ark-maven-plugin&lt;/artifactId&gt;
&lt;/plugin&gt;
</code></pre>

<p>The configuration template is described as follows:</p>

<pre><code class="language-xml">&lt;build&gt;
    &lt;plugins&gt;
        &lt;plugin&gt;
            &lt;groupId&gt;com.alipay.sofa&lt;/groupId&gt;
            &lt;artifactId&gt;sofa-ark-maven-plugin&lt;/artifactId&gt;
            &lt;executions&gt;
                &lt;execution&gt;
                    &lt;id&gt;default-cli&lt;/id&gt;
                    
                    &lt;!--goal executed to generate executable-ark-jar --&gt;
                    &lt;goals&gt;
                        &lt;goal&gt;repackage&lt;/goal&gt;
                    &lt;/goals&gt;
                    
                    &lt;configuration&gt;
                        &lt;!--specify destination where executable-ark-jar will be saved, default saved to ${project.build.directory}--&gt;
                        &lt;outputDirectory&gt;./target&lt;/outputDirectory&gt;
                        
                        &lt;!--default none--&gt;
                        &lt;arkClassifier&gt;executable-ark&lt;/arkClassifier&gt;
                        
                        &lt;!-- all class exported by ark plugin would be resolved by ark biz in default, if 
                        configure denyImportClasses, then it would prefer to load them by ark biz itself --&gt;
                        &lt;denyImportClasses&gt;
                            &lt;class&gt;com.alipay.sofa.SampleClass1&lt;/class&gt;
                            &lt;class&gt;com.alipay.sofa.SampleClass2&lt;/class&gt;
                        &lt;/denyImportClasses&gt;
                        
                        &lt;!-- Corresponding to denyImportClasses, denyImportPackages is package-level --&gt;
                        &lt;denyImportPackages&gt;
                            &lt;package&gt;com.alipay.sofa&lt;/package&gt;
                            &lt;package&gt;org.springframework&lt;/package&gt;
                        &lt;/denyImportPackages&gt;
                        
                        &lt;!-- denyImportResources can prevent resource exported by ark plugin with accurate 
                        name to be resolved --&gt;
                        &lt;denyImportResources&gt;
                            &lt;resource&gt;META-INF/spring/test1.xml&lt;/resource&gt;
                            &lt;resource&gt;META-INF/spring/test2.xml&lt;/resource&gt;
                        &lt;/denyImportResources&gt;
                    &lt;/configuration&gt;
                &lt;/execution&gt;
            &lt;/executions&gt;
        &lt;/plugin&gt;
    &lt;/plugins&gt;
&lt;/build&gt;
</code></pre>

<p>Description of plugin configuration:</p>

<ul>
<li><code>outputDirectory</code>: Execute <code>mvn package</code> and then specify a directory to store the Ark package. The default directory is ${project. Build. Directory}.</li>
<li><code>arkClassifier</code>: Execute <code>mvn docleoy</code>, and then specify the coordinates of Maven repositories to locate the Ark package by setting the <code>classfaulter</code> value (the default is empty). We recommend that you configure this to give a different name from the ordinary Fat jar;</li>
<li><code>denyImportClasses</code>: By default, the application will first load the classes that the Art plugin exports. It can be configured to deny such export.</li>
<li><code>denyImportPackages</code>: Corresponding to the above <code>denyImportClasses</code>, it can be configured to deny import at the package level;</li>
<li><code>denyImportResources</code>: By default, the application will first load the resources that the Art plugin exports. It can be configured to deny such export.</li>
</ul>

<h2 id="add-dependencies-for-the-class-isolation-framework">Add dependencies for the class isolation framework</h2>

<p>To use SOFABoot class isolation capabilities when running test cases in the development process, we need to add the following dependencies into the SOFABoot project:</p>

<pre><code class="language-xml">&lt;dependency&gt;
    &lt;groupId&gt;com.alipay.sofa&lt;/groupId&gt;
    &lt;artifactId&gt;sofa-ark-springboot-starter&lt;/artifactId&gt;
&lt;/dependency&gt;
</code></pre>

<p>In accordance with SpringBoot&rsquo;s dependency-as-a-service principle, after adding those dependencies, the SOFABoot class isolation container will be started before the application runs.</p>

<p>SOFABoot&rsquo;s class isolation framework will automatically check whether Ark plugins (or jars that need to be isolated; for detailed information, please refer to <a href="https://github.com/sofastack/sofa-Ark">SOFAArk</a>) has been loaded into the application, and isolated from loading; for example, to avoid dependency conflicts between the official SOFARPC components provided by SOFABoot and the application, SOFABoot provides an Ark plugin version of SOFARPC. If you want to isolate SOFARPC, you only need to add the following components:</p>

<pre><code class="language-xml">&lt;dependency&gt;
    &lt;groupId&gt;com.alipay.sofa&lt;/groupId&gt;
    &lt;artifactId&gt;rpc-sofa-boot-starter&lt;/artifactId&gt;
    &lt;classifier&gt;ark-plugin&lt;/classifier&gt;
&lt;/dependency&gt;
</code></pre>

<p>By doing so, SOFABoot&rsquo;s class isolation container will automatically isolate SOFARPC and other application dependencies at run time to avoid potential package conflicts. Developers, of course, can also develop their own Ark plugin packages (refer to <a href="https://github.com/sofastack/sofa-Ark">SOFAArk</a> for details).</p>

<h2 id="running">Running</h2>

<h3 id="running-in-ide">Running in IDE</h3>

<p>Simply run the <code>main</code> function. If successful, the following startup log will appear:</p>

<pre><code class="language-java">2018-04-07 10:51:59,646 INFO  main                             - Begin to start ArkServiceContainer
2018-04-07 10:52:00,550 INFO  main                             - Init Service: com.alipay.sofa.ark.container.service.plugin.PluginDeployServiceImpl
2018-04-07 10:52:00,551 INFO  main                             - Init Service: com.alipay.sofa.ark.container.service.classloader.ClassloaderServiceImpl
2018-04-07 10:52:00,557 INFO  main                             - Finish to start ArkServiceContainer
2018-04-07 10:52:00,571 INFO  main                             - Start to process pipeline stage: com.alipay.sofa.ark.container.pipeline.HandleArchiveStage
2018-04-07 10:52:00,624 INFO  main                             - Finish to process pipeline stage: com.alipay.sofa.ark.container.pipeline.HandleArchiveStage
2018-04-07 10:52:00,624 INFO  main                             - Start to process pipeline stage: com.alipay.sofa.ark.container.pipeline.DeployPluginStage
2018-04-07 10:52:00,626 INFO  main                             - Start to deploy plugin: sample-ark-plugin
starting in sample ark plugin activator
2018-04-07 10:52:00,645 INFO  main                             - Service: com.alipay.sofa.ark.sample.facade.SamplePluginService publish by: PluginServiceProvider{pluginName='sample-ark-plugin', priority=1000} succeed
2018-04-07 10:52:00,647 INFO  main                             - Finish to deploy plugin: sample-ark-plugin
2018-04-07 10:52:00,647 INFO  main                             - Finish to process pipeline stage: com.alipay.sofa.ark.container.pipeline.DeployPluginStage
2018-04-07 10:52:00,647 INFO  main                             - Start to process pipeline stage: com.alipay.sofa.ark.container.pipeline.DeployBizStage
2018-04-07 10:52:00,650 INFO  main                             - Begin to start biz: Startup In IDE
</code></pre>

<h3 id="packaging-to-run">Packaging to run</h3>

<p>Select <code>mvn clean install</code> to package the project into a fat jar with class isolation features. The packaged file format is like this:</p>

<pre><code>.
├── classes
│   └── com
│       └── alipay
│           └── sofa
│               └── boot
│                   └── examples
│                       └── demo
│                           └── isolation
│                               └── SofaBootClassIsolationDemoApplication.class
├── generated-sources
│   └── annotations
├── maven-archiver
│   └── pom.properties
├── maven-status
│   └── maven-compiler-plugin
│       ├── compile
│       │   └── default-compile
│       │       ├── createdFiles.lst
│       │       └── inputFiles.lst
│       └── testCompile
│           └── default-testCompile
│               └── inputFiles.lst
├── sofaboot-sample-with-isolation-2.4.0-ark-biz.jar
├── sofaboot-sample-with-isolation-2.4.0-executable-ark.jar
└── sofaboot-sample-with-isolation-2.4.0.jar
</code></pre>

<p>Here, <code>sofabot-sample-with-isolation-2.4.0-executable-ark</code> is a Fat Jar with the class isolation capability, so we can simply start it up with the <code>java -jar</code> command. Execute <code>java -jar sofaboot-sample-with-isolation-2.4.0-executable-ark</code> on the server or console, and a successful startup log will appear like this:</p>

<pre><code>2018-04-07 10:57:48.033  INFO 8488 --- [           main] s.b.c.e.t.TomcatEmbeddedServletContainer : Tomcat started on port(s): 8080 (http)
2018-04-07 10:57:48.042  INFO 8488 --- [           main] .i.SofaBootClassIsolationDemoApplication : Started SofaBootClassIsolationDemoApplication in 7.432 seconds (JVM running for 8.99)
Ark container started in 8797 ms.
</code></pre>

<h2 id="testing">Testing</h2>

<p>To run the test cases with SOFABoot&rsquo;s class isolation ability, you need to add an extra dependency—SOFABoot&rsquo;s official <code>test-sofa-boot-starter</code>—and write integration testing and unit testing code using <code>SofaBootRunner</code> and <code>SofaJUnit4Runner</code>, which is also a coding style for test cases recommended by SOFABoot.</p>

<p>With the two modules, the system can automatically check whether the application has used the class isolation capability. Developers can achieve this by simply adding or deleting the SOFABoot class isolation dependencies</p>

<pre><code class="language-xml">&lt;dependency&gt;
    &lt;groupId&gt;com.alipay.sofa&lt;/groupId&gt;
    &lt;artifactId&gt;sofa-ark-springboot-starter&lt;/artifactId&gt;
&lt;/dependency&gt;
</code></pre>

<p>to complete the integration and separation of the SOFABoot class isolation. See the following for details:</p>

<h4 id="sofabootrunner">SofaBootRunner</h4>

<p>Sample code for integration testing:</p>

<pre><code class="language-java">@RunWith(SofaBootRunner.class)
@SpringBootTest(classes = SofaBootClassIsolationDemoApplication.class)
public class IntegrationTestCase {

    @Autowired
    private SampleService sampleService;

    @Test
    public void test() {
        Assert.assertTrue(&quot;service&quot;.equals(sampleService.service()));
    }

}
</code></pre>

<p>The <code>SofaBootRunner</code> will check whether the application has introduced dependencies;</p>

<pre><code class="language-xml">&lt;dependency&gt;
    &lt;groupId&gt;com.alipay.sofa&lt;/groupId&gt;
    &lt;artifactId&gt;sofa-ark-springboot-starter&lt;/artifactId&gt;
&lt;/dependency&gt;
</code></pre>

<p>In accordance with Spring Boot&rsquo;s dependency-as-a-service principle, if the <code>sofa-Ark-springboot-starter</code> dependency is detected, then the <code>SofaBootRunner</code> will enable SOFABoot&rsquo;s class isolation capability, otherwise, it will be the same as the native <code>SpringRunner</code>.</p>

<h4 id="sofajunit4runner">SofaJUnit4Runner</h4>

<p>Sample code for unit testing:</p>

<pre><code class="language-java">@RunWith(SofaJUnit4Runner.class)
public class UnitTestCase {

    @Test
    public void test() {
        Assert.assertTrue(true);
    }
}
</code></pre>

<p>Likewise, <code>SofaJUnit4Runner</code> will check whether the dependency is introduced. If so, the <code>SofaJUnit4Runner</code> will enable the capability as well, or will be same as the native <code>JUnit4</code>.</p>

<h4 id="customized-runner">Customized Runner</h4>

<p>When writing test cases, sometimes we need to specify a special Runner. For a unified coding style, you can use <code>SofaBootRunner</code> and <code>SofaJUnit4Runner</code> with the annotation <code>@DelegateToRunner</code>. Here is some sample code:</p>

<pre><code class="language-java">@RunWith(SofaJUnit4Runner.class)
@DelegateToRunner(BlockJUnit4ClassRunner.class)
public class UnitTestCaseWithoutArk {

    @Test
    public void test() {
        Assert.assertFalse(true);
    }

}
</code></pre>

<p>It is identical to the following:</p>

<pre><code class="language-java">@RunWith(BlockJUnit4ClassRunner.class)
public class UnitTestCaseWithoutArk {

    @Test
    public void test() {
        Assert.assertFalse(true);
    }

}
</code></pre>

</article>

<script>
  const article = document.querySelector('article.typo')
  
  const imgElements = article.querySelectorAll('img');
  
  imgElements.forEach(img => {
    const src = img.getAttribute('src');
    
    if (src.toLowerCase().endsWith('.image')) {
      img.setAttribute('src', src.replace('.image', ''));
    }
    img.setAttribute('referrerpolicy', 'no-referrer');
  });
</script>


	</main>
</div>



	


<footer class="ss-footer">
	<div class="container">
		<div class="links">
			
				<div class="cate">
					<h2 class="cate-title">Resources</h2>
					
						<a class="link" href="https://github.com/sofastack">Github</a>
					
						<a class="link" href="https://gitee.com/sofastack/">Gitee</a>
					
						<a class="link" href="https://github.com/sofastack-guides">Samples</a>
					
				</div>
			
				<div class="cate">
					<h2 class="cate-title">Social Media</h2>
					
						<a class="link" href="https://zhuanlan.zhihu.com/sofastack">Zhihu</a>
					
						<a class="link" href="https://weibo.com/sofastack">Weibo</a>
					
						<a class="link" href="https://twitter.com/sofastack_io">Twitter</a>
					
				</div>
			
				<div class="cate">
					<h2 class="cate-title">Get Involved</h2>
					
						<a class="link" href="https://github.com/sofastack/sofastack.tech/issues">Feedback</a>
					
						<a class="link" href="https://github.com/sofastack/community">Community</a>
					
						<a class="link" href="https://github.com/sofastack/sofastack.tech/wiki">Wiki</a>
					
						<a class="link" href="mailto:sofa@alipay.cloud.com">Email</a>
					
				</div>
			
				<div class="cate">
					<h2 class="cate-title">Ant Financial Open Source</h2>
					
						<a class="link" href="https://ant.design/">Ant Design</a>
					
						<a class="link" href="https://eggjs.org/">Egg</a>
					
						<a class="link" href="https://sqlflow.org">SQLFlow</a>
					
						<a class="link" href="https://tech.antfin.com/open-source">More</a>
					
				</div>
			
		</div>
		<div class="qrcode">
			
				<div>
					<img class="qrcode-img" src="/sofastack.tech/img/qrcode/qrcode_1.png" />
					<p class="qrcode-desc">Wechat Official Account</p>
				</div>
			
				<div>
					<img class="qrcode-img" src="/sofastack.tech/img/qrcode/qrcode_2.png" />
					<p class="qrcode-desc">DingTalk Group</p>
				</div>
			
		</div>
	</div>
	<div class="copyright">
		<p>
			© 2018 - 2022  The SOFAStack Authors
			<a href="http://beian.miit.gov.cn/">浙 ICP 备 16045294 号-3</a>
		</p>
	</div>
</footer>

</body>

</html>