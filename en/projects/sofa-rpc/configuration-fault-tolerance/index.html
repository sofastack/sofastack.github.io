<!DOCTYPE html>
<html>

<head>
	<title>
	Fault tolerance configuration · SOFAStack
</title>
	<meta charset="utf-8">
<meta http-equiv="X-UA-Compatible" content="IE=edge,chrome=1">
<meta name="viewport" content="width=device-width,minimum-scale=1">
<meta name="description" content="SOFAStack is a Scalable Open Financial Architecture for building cloud native applications" />

<meta name="generator" content="Hugo 0.55.5" /><link rel="shortcut icon" href=https://gw.alipayobjects.com/os/q/cms/images/jqu9346l/4ba95631-2489-4885-881f-bc7f8d787d5e_w64_h61.png type="image/png">

<link href="https://unpkg.com/purecss@1.0.0/build/base-min.css" rel="stylesheet">



<link href="/sofastack.tech/css/main.css" rel="stylesheet">
<link href="/sofastack.tech/css/zoom-image.css" rel="stylesheet">

<script src="/sofastack.tech/js/iconfont.js"></script>
<script src="/sofastack.tech/js/highlight.pack.js"></script>
<script>hljs.initHighlightingOnLoad();</script>


<script>window.SITE_LANGUAGE = "en"</script>
<script src="/sofastack.tech/js/app.js"></script>





<script type="application/javascript">
var doNotTrack = false;
if (!doNotTrack) {
	(function(i,s,o,g,r,a,m){i['GoogleAnalyticsObject']=r;i[r]=i[r]||function(){
	(i[r].q=i[r].q||[]).push(arguments)},i[r].l=1*new Date();a=s.createElement(o),
	m=s.getElementsByTagName(o)[0];a.async=1;a.src=g;m.parentNode.insertBefore(a,m)
	})(window,document,'script','https://www.google-analytics.com/analytics.js','ga');
	ga('create', 'UA-142131411-1', 'auto');
	
	ga('send', 'pageview');
}
</script>

</head>

<body>
	<header class="ss-header">
	<nav class="navbar" role="navigation" aria-label="main navigation">
		<div class="navbar-brand">
			<a class="logo-link" href="/sofastack.tech/en/">
				<img class="logo" src="/sofastack.tech/img/logo.png">
			</a>
			<div class="-show-mobile">
				<a id="mobile-menu-icon">
					<svg class="icon" aria-hidden="true">
						<use xlink:href="#icon-menu"></use>
					</svg>
				</a>
				<nav id="mobile-menu">
						<div id="js-menu-search-mobile" class="navbar-search-mobile">
							<input class="input" placeholder="Search">
							<svg class="icon" aria-hidden="true">
								<use xlink:href="#icon-search"></use>
							</svg>
						</div>
					
          
            <a
              class=""
              href="/sofastack.tech/en/projects/">
              <span>
                Projects
              </span>
              <svg class="icon" aria-hidden="true"><use xlink:href="#icon-ARROW"></use></svg>
            </a>
					
            <a
              class=""
              href="/sofastack.tech/en/guides/">
              <span>
                Guides
              </span>
              <svg class="icon" aria-hidden="true"><use xlink:href="#icon-ARROW"></use></svg>
            </a>
					
            <a
              class=""
              href="/sofastack.tech/en/blog/">
              <span>
                Blog
              </span>
              <svg class="icon" aria-hidden="true"><use xlink:href="#icon-ARROW"></use></svg>
            </a>
					
            <a
              class=""
              href="/sofastack.tech/en/activities/">
              <span>
                Activity
              </span>
              <svg class="icon" aria-hidden="true"><use xlink:href="#icon-ARROW"></use></svg>
            </a>
					
            <a
              class=""
              href="/sofastack.tech/awesome/">
              <span>
                Awesome SOFA
              </span>
              <svg class="icon" aria-hidden="true"><use xlink:href="#icon-ARROW"></use></svg>
            </a>
					
					
            
              <a href="/sofastack.tech/projects/sofa-rpc/configuration-fault-tolerance/">
                <span>中文</span>
                <svg class="icon" aria-hidden="true"><use xlink:href="#icon-transfer"></use></svg>
              </a>
						
					
				</nav>
			</div>
		</div>

		<div class="navbar-menu -hidden-mobile">
			<div class="navbar-start">
				
				
					<a class="navbar-item "
						href="/sofastack.tech/en/projects/">Projects</a>
				
					<a class="navbar-item "
						href="/sofastack.tech/en/guides/">Guides</a>
				
					<a class="navbar-item "
						href="/sofastack.tech/en/blog/">Blog</a>
				
					<a class="navbar-item "
						href="/sofastack.tech/en/activities/">Activity</a>
				
					<a class="navbar-item "
						href="/sofastack.tech/awesome/">Awesome SOFA</a>
				
			</div>
			<div class="navbar-end">
				<div class="navbar-item">
					<div id="js-menu-search" class="navbar-search">
						<input class="input" placeholder="Search">
						<svg class="icon" aria-hidden="true">
							<use xlink:href="#icon-search"></use>
						</svg>
					</div>
				</div>
				<div class="navbar-item">
					
						
							<a class="translation" href="/sofastack.tech/projects/sofa-rpc/configuration-fault-tolerance/">中</a>
						
					
				</div>
			</div>
		</div>
	</nav>
</header>


	

	

	

	

	



	

<div class="ss-layout-container">
	<aside class="ss-layout-aside -left ss-card -soft-hidden">
		






	<div id="js-drawer" class="ss-toc">
		<div id="js-drawer-handle" class="drawer-handle">
			<svg class="icon icon-menu" aria-hidden="true">
				<use xlink:href="#icon-menu"></use>
			</svg>
			<svg class="icon icon-close" aria-hidden="true">
				<use xlink:href="#icon-close"></use>
			</svg>
		</div>
		<div class="drawer-body">
			<div class="header" title="SOFARPC is a high-performance, high-extensibility, production-level Java RPC framework.">SOFARPC

































































































































































































































































































































































































































































































<div class="ss-toc-list-card -hidden-mobile">
	<svg class="icon -hidden-mobile" aria-hidden="true">
		<use xlink:href="#icon-menu1"></use>
	</svg>
	<div class="ss-tooltip">
		
		
		<div class="toc-list">
			<h4 class="title">Main Projects</h4>
			<ul class="list">
				
				<li class="item">
					
					
					
					
					<a href=/sofastack.tech/en/projects/sofa-boot/overview/>
						SOFABoot
					</a>
				</li>
				
				<li class="item">
					
					
					
					
					<a href=/sofastack.tech/en/projects/sofa-rpc/overview/>
						SOFARPC
					</a>
				</li>
				
				<li class="item">
					
					
					
					
					<a href=/sofastack.tech/en/projects/sofa-tracer/overview/>
						SOFATracer
					</a>
				</li>
				
				<li class="item">
					
					
					
					
					<a href=/sofastack.tech/en/projects/sofa-lookout/overview/>
						SOFALookout
					</a>
				</li>
				
				<li class="item">
					
					
					
					
					<a href=/sofastack.tech/en/projects/sofa-registry/overview/>
						SOFARegistry
					</a>
				</li>
				
			</ul>
		</div>
		
		
		
		<div class="toc-list">
			<h4 class="title">Incubating Projects</h4>
			<ul class="list">
				
				<li class="item">
					
					
					
					
					<a href=/sofastack.tech/en/projects/sofa-mesh/overview/>
						SOFAMesh
					</a>
				</li>
				
				<li class="item">
					
					
					
					
					<a href=/sofastack.tech/en/projects/sofa-dashboard/overview/>
						SOFADashboard
					</a>
				</li>
				
			</ul>
		</div>
		
		
		
		<div class="toc-list">
			<h4 class="title">Tool Projects</h4>
			<ul class="list">
				
				<li class="item">
					
					
					
					
					<a href=/sofastack.tech/en/projects/sofa-bolt/overview/>
						SOFABolt
					</a>
				</li>
				
				<li class="item">
					
					
					
					
					<a href=/sofastack.tech/en/projects/sofa-jraft/overview/>
						SOFAJRaft
					</a>
				</li>
				
				<li class="item">
					
					
					
					
					<a href=/sofastack.tech/en/projects/sofa-acts/overview/>
						SOFAActs
					</a>
				</li>
				
				<li class="item">
					
					
					
					
					
					
					<a href=https://www.sofastack.tech/en/projects/sofa-boot/sofa-ark-readme//>
						SOFAArk
					</a>
				</li>
				
			</ul>
		</div>
		
		
		
		<div class="toc-list">
			<h4 class="title">Ecosystem Projects</h4>
			<ul class="list">
				
				<li class="item">
					
					
					
					
					
					
					<a href=https://mosn.io/en/>
						MOSN
					</a>
				</li>
				
				<li class="item">
					
					
					
					
					
					
					<a href=https://occlum.io/>
						Occlum
					</a>
				</li>
				
				<li class="item">
					
					
					
					
					
					
					<a href=https://seata.io/>
						Seata
					</a>
				</li>
				
				<li class="item">
					
					
					
					
					
					
					<a href=https://mosn.io/layotto/>
						Layotto
					</a>
				</li>
				
			</ul>
		</div>
		
		
	</div>
</div>

			</div>
			<div class="body">
				



<ul class="leaf-section">
	
		
			<li class="item">
				<div class="link">
					<a
						title="Overview"
						href="/sofastack.tech/en/projects/sofa-rpc/overview/"
					>Overview</a>
				</div>
			</li>
		
		
	
		
		
			<li class="item">
				<div class="link">
					<svg class="icon arrow" aria-hidden="true">
						<use xlink:href="#icon-arrow"></use>
					</svg>
					<a
						title="Quick start guide"
					>Quick start guide</a>
				</div>
				



<ul class="leaf-section">
	
		
			<li class="item">
				<div class="link">
					<a
						title="Get started with SOFARPC"
						href="/sofastack.tech/en/projects/sofa-rpc/getting-started-with-rpc/"
					>Get started with SOFARPC</a>
				</div>
			</li>
		
		
	
		
			<li class="item">
				<div class="link">
					<a
						title="Get started with SOFABoot"
						href="/sofastack.tech/en/projects/sofa-rpc/getting-started-with-sofa-boot/"
					>Get started with SOFABoot</a>
				</div>
			</li>
		
		
	
</ul>
			</li>
		
	
		
		
			<li class="item">
				<div class="link">
					<svg class="icon arrow" aria-hidden="true">
						<use xlink:href="#icon-arrow"></use>
					</svg>
					<a
						title="User guide"
					>User guide</a>
				</div>
				



<ul class="leaf-section">
	
		
		
			<li class="item">
				<div class="link">
					<svg class="icon arrow" aria-hidden="true">
						<use xlink:href="#icon-arrow"></use>
					</svg>
					<a
						title="Programming"
					>Programming</a>
				</div>
				



<ul class="leaf-section">
	
		
			<li class="item">
				<div class="link">
					<a
						title="Use API in non-Spring environment"
						href="/sofastack.tech/en/projects/sofa-rpc/programing-rpc/"
					>Use API in non-Spring environment</a>
				</div>
			</li>
		
		
	
		
			<li class="item">
				<div class="link">
					<a
						title="Use XML in SOFABoot"
						href="/sofastack.tech/en/projects/sofa-rpc/programing-sofa-boot-xml/"
					>Use XML in SOFABoot</a>
				</div>
			</li>
		
		
	
		
			<li class="item">
				<div class="link">
					<a
						title="Use annotation in SOFABoot"
						href="/sofastack.tech/en/projects/sofa-rpc/programing-sofa-boot-annotation/"
					>Use annotation in SOFABoot</a>
				</div>
			</li>
		
		
	
		
			<li class="item">
				<div class="link">
					<a
						title="Use dynamic API in SOFABoot"
						href="/sofastack.tech/en/projects/sofa-rpc/programing-sofa-boot-api/"
					>Use dynamic API in SOFABoot</a>
				</div>
			</li>
		
		
	
</ul>
			</li>
		
	
		
		
			<li class="item">
				<div class="link">
					<svg class="icon arrow" aria-hidden="true">
						<use xlink:href="#icon-arrow"></use>
					</svg>
					<a
						title="Features"
					>Features</a>
				</div>
				



<ul class="leaf-section">
	
		
			<li class="item">
				<div class="link">
					<a
						title="Service publishing and reference"
						href="/sofastack.tech/en/projects/sofa-rpc/publish-and-reference/"
					>Service publishing and reference</a>
				</div>
			</li>
		
		
	
		
		
			<li class="item">
				<div class="link">
					<svg class="icon arrow" aria-hidden="true">
						<use xlink:href="#icon-arrow"></use>
					</svg>
					<a
						title="Communication protocols"
					>Communication protocols</a>
				</div>
				



<ul class="leaf-section">
	
		
		
			<li class="item">
				<div class="link">
					<svg class="icon arrow" aria-hidden="true">
						<use xlink:href="#icon-arrow"></use>
					</svg>
					<a
						title="Bolt protocol"
					>Bolt protocol</a>
				</div>
				



<ul class="leaf-section">
	
		
			<li class="item">
				<div class="link">
					<a
						title="Basic usage of Bolt protocol"
						href="/sofastack.tech/en/projects/sofa-rpc/bolt-usage/"
					>Basic usage of Bolt protocol</a>
				</div>
			</li>
		
		
	
		
			<li class="item">
				<div class="link">
					<a
						title="Calling type"
						href="/sofastack.tech/en/projects/sofa-rpc/invoke-type/"
					>Calling type</a>
				</div>
			</li>
		
		
	
		
			<li class="item">
				<div class="link">
					<a
						title="Timeout control"
						href="/sofastack.tech/en/projects/sofa-rpc/bolt-timeout/"
					>Timeout control</a>
				</div>
			</li>
		
		
	
		
			<li class="item">
				<div class="link">
					<a
						title="Generic call"
						href="/sofastack.tech/en/projects/sofa-rpc/generic-invoke/"
					>Generic call</a>
				</div>
			</li>
		
		
	
		
			<li class="item">
				<div class="link">
					<a
						title="Serialization protocol"
						href="/sofastack.tech/en/projects/sofa-rpc/serialization/"
					>Serialization protocol</a>
				</div>
			</li>
		
		
	
		
			<li class="item">
				<div class="link">
					<a
						title="Custom thread pool"
						href="/sofastack.tech/en/projects/sofa-rpc/custom-thread-pool/"
					>Custom thread pool</a>
				</div>
			</li>
		
		
	
</ul>
			</li>
		
	
		
		
			<li class="item">
				<div class="link">
					<svg class="icon arrow" aria-hidden="true">
						<use xlink:href="#icon-arrow"></use>
					</svg>
					<a
						title="RESTful protocol"
					>RESTful protocol</a>
				</div>
				



<ul class="leaf-section">
	
		
			<li class="item">
				<div class="link">
					<a
						title="Basic usage of RESTful protocol"
						href="/sofastack.tech/en/projects/sofa-rpc/restful-basic/"
					>Basic usage of RESTful protocol</a>
				</div>
			</li>
		
		
	
		
			<li class="item">
				<div class="link">
					<a
						title="REST filter"
						href="/sofastack.tech/en/projects/sofa-rpc/restful-filter/"
					>REST filter</a>
				</div>
			</li>
		
		
	
		
			<li class="item">
				<div class="link">
					<a
						title="Integrate with Swagger"
						href="/sofastack.tech/en/projects/sofa-rpc/restful-swagger/"
					>Integrate with Swagger</a>
				</div>
			</li>
		
		
	
		
			<li class="item">
				<div class="link">
					<a
						title="REST Cors"
						href="/sofastack.tech/en/projects/sofa-rpc/restful-cors/"
					>REST Cors</a>
				</div>
			</li>
		
		
	
</ul>
			</li>
		
	
		
		
			<li class="item">
				<div class="link">
					<svg class="icon arrow" aria-hidden="true">
						<use xlink:href="#icon-arrow"></use>
					</svg>
					<a
						title="Dubbo protocol"
					>Dubbo protocol</a>
				</div>
				



<ul class="leaf-section">
	
		
			<li class="item">
				<div class="link">
					<a
						title="Basic usage of Dubbo protocol"
						href="/sofastack.tech/en/projects/sofa-rpc/dubbo-usage/"
					>Basic usage of Dubbo protocol</a>
				</div>
			</li>
		
		
	
</ul>
			</li>
		
	
		
		
			<li class="item">
				<div class="link">
					<svg class="icon arrow" aria-hidden="true">
						<use xlink:href="#icon-arrow"></use>
					</svg>
					<a
						title="H2C protocol"
					>H2C protocol</a>
				</div>
				



<ul class="leaf-section">
	
		
			<li class="item">
				<div class="link">
					<a
						title="Basic usage of H2C protocol"
						href="/sofastack.tech/en/projects/sofa-rpc/h2c-usage/"
					>Basic usage of H2C protocol</a>
				</div>
			</li>
		
		
	
</ul>
			</li>
		
	
		
		
			<li class="item">
				<div class="link">
					<svg class="icon arrow" aria-hidden="true">
						<use xlink:href="#icon-arrow"></use>
					</svg>
					<a
						title="HTTP protocol"
					>HTTP protocol</a>
				</div>
				



<ul class="leaf-section">
	
		
			<li class="item">
				<div class="link">
					<a
						title="Basic usage of HTTP protocol"
						href="/sofastack.tech/en/projects/sofa-rpc/http-json/"
					>Basic usage of HTTP protocol</a>
				</div>
			</li>
		
		
	
</ul>
			</li>
		
	
</ul>
			</li>
		
	
		
		
			<li class="item">
				<div class="link">
					<svg class="icon arrow" aria-hidden="true">
						<use xlink:href="#icon-arrow"></use>
					</svg>
					<a
						title="Select Service Registry"
					>Select Service Registry</a>
				</div>
				



<ul class="leaf-section">
	
		
			<li class="item">
				<div class="link">
					<a
						title="SOFARegistry"
						href="/sofastack.tech/en/projects/sofa-rpc/registry-sofa/"
					>SOFARegistry</a>
				</div>
			</li>
		
		
	
		
			<li class="item">
				<div class="link">
					<a
						title="Zookeeper"
						href="/sofastack.tech/en/projects/sofa-rpc/registry-zookeeper/"
					>Zookeeper</a>
				</div>
			</li>
		
		
	
		
			<li class="item">
				<div class="link">
					<a
						title="Local"
						href="/sofastack.tech/en/projects/sofa-rpc/registry-local/"
					>Local</a>
				</div>
			</li>
		
		
	
		
			<li class="item">
				<div class="link">
					<a
						title="Consul"
						href="/sofastack.tech/en/projects/sofa-rpc/registry-consul/"
					>Consul</a>
				</div>
			</li>
		
		
	
		
			<li class="item">
				<div class="link">
					<a
						title="Nacos"
						href="/sofastack.tech/en/projects/sofa-rpc/registry-nacos/"
					>Nacos</a>
				</div>
			</li>
		
		
	
</ul>
			</li>
		
	
		
			<li class="item">
				<div class="link">
					<a
						title="Direct call"
						href="/sofastack.tech/en/projects/sofa-rpc/peer-to-peer/"
					>Direct call</a>
				</div>
			</li>
		
		
	
		
			<li class="item">
				<div class="link">
					<a
						title="Load balance"
						href="/sofastack.tech/en/projects/sofa-rpc/load-balance/"
					>Load balance</a>
				</div>
			</li>
		
		
	
		
			<li class="item">
				<div class="link">
					<a
						title="Custom filter"
						href="/sofastack.tech/en/projects/sofa-rpc/custom-filter/"
					>Custom filter</a>
				</div>
			</li>
		
		
	
		
			<li class="item">
				<div class="link">
					<a
						title="Custom router"
						href="/sofastack.tech/en/projects/sofa-rpc/custom-router/"
					>Custom router</a>
				</div>
			</li>
		
		
	
		
			<li class="item">
				<div class="link">
					<a
						title="Retry strategy"
						href="/sofastack.tech/en/projects/sofa-rpc/retry-invoke/"
					>Retry strategy</a>
				</div>
			</li>
		
		
	
		
		
			<li class="item">
				<div class="link">
					<svg class="icon arrow" aria-hidden="true">
						<use xlink:href="#icon-arrow"></use>
					</svg>
					<a
						title="Tracing"
					>Tracing</a>
				</div>
				



<ul class="leaf-section">
	
		
			<li class="item">
				<div class="link">
					<a
						title="SOFATracer"
						href="/sofastack.tech/en/projects/sofa-rpc/sofatracer-usage/"
					>SOFATracer</a>
				</div>
			</li>
		
		
	
		
			<li class="item">
				<div class="link">
					<a
						title="Skywalking"
						href="/sofastack.tech/en/projects/sofa-rpc/skywalking-usage/"
					>Skywalking</a>
				</div>
			</li>
		
		
	
</ul>
			</li>
		
	
		
			<li class="item">
				<div class="link">
					<a
						title="Link data transparent transmission"
						href="/sofastack.tech/en/projects/sofa-rpc/invoke-chain-pass-data/"
					>Link data transparent transmission</a>
				</div>
			</li>
		
		
	
		
			<li class="item">
				<div class="link">
					<a
						title="Warm-up weight"
						href="/sofastack.tech/en/projects/sofa-rpc/provider-warmup-weight/"
					>Warm-up weight</a>
				</div>
			</li>
		
		
	
		
		
			<li class="item">
				<div class="link">
					<svg class="icon arrow" aria-hidden="true">
						<use xlink:href="#icon-arrow"></use>
					</svg>
					<a
						title="Disaster recovery"
					>Disaster recovery</a>
				</div>
				



<ul class="leaf-section">
	
		
			<li class="item">
				<div class="link">
					<a
						title="Fault tolerance"
						href="/sofastack.tech/en/projects/sofa-rpc/fault-tolerance/"
					>Fault tolerance</a>
				</div>
			</li>
		
		
	
		
			<li class="item">
				<div class="link">
					<a
						title="Hystrix fault tolerance"
						href="/sofastack.tech/en/projects/sofa-rpc/fault-hystrix/"
					>Hystrix fault tolerance</a>
				</div>
			</li>
		
		
	
</ul>
			</li>
		
	
		
			<li class="item">
				<div class="link">
					<a
						title="NodeJS support"
						href="/sofastack.tech/en/projects/sofa-rpc/node-and-java-communicate/"
					>NodeJS support</a>
				</div>
			</li>
		
		
	
		
			<li class="item">
				<div class="link">
					<a
						title="Graceful shutdown"
						href="/sofastack.tech/en/projects/sofa-rpc/graceful-shutdown/"
					>Graceful shutdown</a>
				</div>
			</li>
		
		
	
</ul>
			</li>
		
	
		
		
			<li class="item">
				<div class="link">
					<svg class="icon arrow" aria-hidden="true">
						<use xlink:href="#icon-arrow"></use>
					</svg>
					<a
						title="Configuration parameters"
					>Configuration parameters</a>
				</div>
				



<ul class="leaf-section">
	
		
			<li class="item">
				<div class="link">
					<a
						title="Service publishing and reference in SOFABoot"
						href="/sofastack.tech/en/projects/sofa-rpc/rpc-config-xml-explain/"
					>Service publishing and reference in SOFABoot</a>
				</div>
			</li>
		
		
	
		
			<li class="item">
				<div class="link">
					<a
						title="RPC application parameter configuration"
						href="/sofastack.tech/en/projects/sofa-rpc/application-rpc-config/"
					>RPC application parameter configuration</a>
				</div>
			</li>
		
		
	
		
			<li class="item">
				<div class="link">
					<a
						title="RPC publishing and reference configuration"
						href="/sofastack.tech/en/projects/sofa-rpc/configuration-common/"
					>RPC publishing and reference configuration</a>
				</div>
			</li>
		
		
	
		
			<li class="item">
				<div class="link -current">
					<a
						title="Fault tolerance"
						href="/sofastack.tech/en/projects/sofa-rpc/configuration-fault-tolerance/"
					>Fault tolerance</a>
				</div>
			</li>
		
		
	
</ul>
			</li>
		
	
</ul>
			</li>
		
	
		
		
			<li class="item">
				<div class="link">
					<svg class="icon arrow" aria-hidden="true">
						<use xlink:href="#icon-arrow"></use>
					</svg>
					<a
						title="Developer guide"
					>Developer guide</a>
				</div>
				



<ul class="leaf-section">
	
		
			<li class="item">
				<div class="link">
					<a
						title="Compile SOFARPC project"
						href="/sofastack.tech/en/projects/sofa-rpc/how-to-build/"
					>Compile SOFARPC project</a>
				</div>
			</li>
		
		
	
		
			<li class="item">
				<div class="link">
					<a
						title="SOFARPC architecture"
						href="/sofastack.tech/en/projects/sofa-rpc/structure-intro/"
					>SOFARPC architecture</a>
				</div>
			</li>
		
		
	
		
			<li class="item">
				<div class="link">
					<a
						title="Client call flow"
						href="/sofastack.tech/en/projects/sofa-rpc/client-invoke-flow/"
					>Client call flow</a>
				</div>
			</li>
		
		
	
		
			<li class="item">
				<div class="link">
					<a
						title="Basic model"
						href="/sofastack.tech/en/projects/sofa-rpc/common-model/"
					>Basic model</a>
				</div>
			</li>
		
		
	
		
		
			<li class="item">
				<div class="link">
					<svg class="icon arrow" aria-hidden="true">
						<use xlink:href="#icon-arrow"></use>
					</svg>
					<a
						title="Extension mechanism"
					>Extension mechanism</a>
				</div>
				



<ul class="leaf-section">
	
		
			<li class="item">
				<div class="link">
					<a
						title="Extension mechanism"
						href="/sofastack.tech/en/projects/sofa-rpc/extension-loader/"
					>Extension mechanism</a>
				</div>
			</li>
		
		
	
		
			<li class="item">
				<div class="link">
					<a
						title="Service Registry extension guide"
						href="/sofastack.tech/en/projects/sofa-rpc/registry-extension-guide/"
					>Service Registry extension guide</a>
				</div>
			</li>
		
		
	
</ul>
			</li>
		
	
		
			<li class="item">
				<div class="link">
					<a
						title="Version release"
						href="/sofastack.tech/en/projects/sofa-rpc/version-release/"
					>Version release</a>
				</div>
			</li>
		
		
	
		
			<li class="item">
				<div class="link">
					<a
						title="Test"
						href="/sofastack.tech/en/projects/sofa-rpc/test/"
					>Test</a>
				</div>
			</li>
		
		
	
</ul>
			</li>
		
	
		
			<li class="item">
				<div class="link">
					<a
						title="Release notes"
						href="/sofastack.tech/en/projects/sofa-rpc/release-notes/"
					>Release notes</a>
				</div>
			</li>
		
		
	
		
			<li class="item">
				<div class="link">
					<a
						title="FAQ"
						href="/sofastack.tech/en/projects/sofa-rpc/faq/"
					>FAQ</a>
				</div>
			</li>
		
		
	
		
			<li class="item">
				<div class="link">
					<a
						title="Roadmap"
						href="/sofastack.tech/en/projects/sofa-rpc/roadmap/"
					>Roadmap</a>
				</div>
			</li>
		
		
	
		
			<li class="item">
				<div class="link">
					<a
						title="Contribution"
						href="/sofastack.tech/en/projects/sofa-rpc/contributing/"
					>Contribution</a>
				</div>
			</li>
		
		
	
		
			<li class="item">
				<div class="link">
					<a
						title="Copyright"
						href="/sofastack.tech/en/projects/sofa-rpc/notice/"
					>Copyright</a>
				</div>
			</li>
		
		
	
</ul>
			</div>
		</div>
	</div>

	</aside>

	<main class="ss-layout-main -card">
		




<div class="ss-meta">
	<div class="container">
		<h1 class="title">
			Fault tolerance configuration
		</h1>
		<a class="edit-button -hidden-mobile"
			href="https://github.com/sofastack/sofastack.tech/edit/master/content/en/projects/sofa-rpc/configuration-fault-tolerance/index.md"
		>Edit</a>
	</div>
	<div class="meta">
		Update time: 2024-06-18 
		
			
		
	</div>
</div>

		<article class="typo">
  <p>Fault tolerance automatically monitors the RPC calls, degrades the weight of the failed node, and recovers the weight when the node restored to normal. The bolt protocol is currently supported.</p>

<p>In SOFABoot, you only need to configure fault tolerance parameters to <code>application.properties</code>. You can select not to configure all parameters but only configure the parameters that you care about. Then, the remaining parameters will take the default values. Note that <code>rpc.aft.regulation.effective</code> is a global switch for this function. If it is off, the function will not work and other parameters will not take effect.</p>

<table>
<thead>
<tr>
<th align="left">Attribute</th>
<th align="left">Description</th>
<th align="left">Default value</th>
</tr>
</thead>

<tbody>
<tr>
<td align="left">timeWindow</td>
<td align="left">Time window size: the period in which statistics are calculated.</td>
<td align="left">10s</td>
</tr>

<tr>
<td align="left">leastWindowCount</td>
<td align="left">Minimum number of calls in the time window: Only data that has reached this minimum value in the time window will be added in calculation and control.</td>
<td align="left">10 times</td>
</tr>

<tr>
<td align="left">leastWindowExceptionRateMultiple</td>
<td align="left">Degradation ratio of the exception rate in the time window to the average exception rate of the service: When calculating the statistical information, the average exception rate of all valid call IPs of the service is calculated. If the exception rate of an IP is greater than or equal to the lowest ratio, the IP will be degraded.</td>
<td align="left">6 times</td>
</tr>

<tr>
<td align="left">weightDegradeRate</td>
<td align="left">Degradation ratio: The rate of degradation of an address when it is degraded.</td>
<td align="left"><sup>1</sup>&frasl;<sub>20</sub></td>
</tr>

<tr>
<td align="left">weightRecoverRate</td>
<td align="left">Recovery ratio: The recovery ratio of the address when it is weighted.</td>
<td align="left">2 times</td>
</tr>

<tr>
<td align="left">degradeEffective</td>
<td align="left">Degradation switch: If the application turns on this switch, it will degrade the address that matches the degradation criteria; otherwise, only the log will be printed.</td>
<td align="left">false (off)</td>
</tr>

<tr>
<td align="left">degradeLeastWeight</td>
<td align="left">Degradation minimum weight: If the address weight is degraded to the weight less than this minimum weight, the minimum weight will be used.</td>
<td align="left">1</td>
</tr>

<tr>
<td align="left">degradeMaxIpCount</td>
<td align="left">Maximum number of IPs for degradation: The number of IPs in the same service that have been degraded cannot exceed this value.</td>
<td align="left">2</td>
</tr>

<tr>
<td align="left">regulationEffective</td>
<td align="left">Global switch: If the switch is turned on by the application, the entire standalone fault tolerance function will be turned on; otherwise, this function will not be used at all.</td>
<td align="left">false (off)</td>
</tr>
</tbody>
</table>

<ul>
<li><p>Example</p>

<pre><code>Com.alipay.sofa.rpc.aft.time.window=20
Com.alipay.sofa.rpc.aft.least.window.count=30
Com.alipay.sofa.rpc.aft.least.window.exception.rate.multiple=6
Com.alipay.sofa.rpc.aft.weight.degrade.rate=0.5
Com.alipay.sofa.rpc.aft.weight.recover.rate=1.2
Com.alipay.sofa.rpc.aft.degrade.effective=ture
Com.alipay.sofa.rpc.aft.degrade.least.weight=1
Com.alipay.sofa.rpc.aft.degrade.max.ip.count=2
Com.alipay.sofa.rpc.aft.regulation.effective=true
</code></pre>

<p>As configured above, the fault tolerance function and degradation switch are enabled. When a node fails too many times, its weight is degraded, and during recovery, the weight will be restored. The node healthy is measured every 20s, and the nodes called for more than 30 times in 20s are recognized as calculation data. If the exception rate of a single node exceeds 6 times of the average exception rate of all nodes, the node will be degraded, and the degradation ratio is 0.5. The weight can be degraded to a minimum of 1. If the exception rate of a single node is less than 6 times of the average exception rate, the node weight will be restored, and the recovery ratio is 1.2. In a single service, 2 IPs can be degraded at most.</p></li>
</ul>

</article>

<script>
  const article = document.querySelector('article.typo')
  
  const imgElements = article.querySelectorAll('img');
  
  imgElements.forEach(img => {
    const src = img.getAttribute('src');
    
    if (src.toLowerCase().endsWith('.image')) {
      img.setAttribute('src', src.replace('.image', ''));
    }
    img.setAttribute('referrerpolicy', 'no-referrer');
  });
</script>


	</main>
</div>



	


<footer class="ss-footer">
	<div class="container">
		<div class="links">
			
				<div class="cate">
					<h2 class="cate-title">Resources</h2>
					
						<a class="link" href="https://github.com/sofastack">Github</a>
					
						<a class="link" href="https://gitee.com/sofastack/">Gitee</a>
					
						<a class="link" href="https://github.com/sofastack-guides">Samples</a>
					
				</div>
			
				<div class="cate">
					<h2 class="cate-title">Social Media</h2>
					
						<a class="link" href="https://zhuanlan.zhihu.com/sofastack">Zhihu</a>
					
						<a class="link" href="https://weibo.com/sofastack">Weibo</a>
					
						<a class="link" href="https://twitter.com/sofastack_io">Twitter</a>
					
				</div>
			
				<div class="cate">
					<h2 class="cate-title">Get Involved</h2>
					
						<a class="link" href="https://github.com/sofastack/sofastack.tech/issues">Feedback</a>
					
						<a class="link" href="https://github.com/sofastack/community">Community</a>
					
						<a class="link" href="https://github.com/sofastack/sofastack.tech/wiki">Wiki</a>
					
						<a class="link" href="mailto:sofa@alipay.cloud.com">Email</a>
					
				</div>
			
				<div class="cate">
					<h2 class="cate-title">Ant Financial Open Source</h2>
					
						<a class="link" href="https://ant.design/">Ant Design</a>
					
						<a class="link" href="https://eggjs.org/">Egg</a>
					
						<a class="link" href="https://sqlflow.org">SQLFlow</a>
					
						<a class="link" href="https://tech.antfin.com/open-source">More</a>
					
				</div>
			
		</div>
		<div class="qrcode">
			
				<div>
					<img class="qrcode-img" src="/sofastack.tech/img/qrcode/qrcode_1.png" />
					<p class="qrcode-desc">Wechat Official Account</p>
				</div>
			
				<div>
					<img class="qrcode-img" src="/sofastack.tech/img/qrcode/qrcode_2.png" />
					<p class="qrcode-desc">DingTalk Group</p>
				</div>
			
		</div>
	</div>
	<div class="copyright">
		<p>
			© 2018 - 2022  The SOFAStack Authors
			<a href="http://beian.miit.gov.cn/">浙 ICP 备 16045294 号-3</a>
		</p>
	</div>
</footer>

</body>

</html>