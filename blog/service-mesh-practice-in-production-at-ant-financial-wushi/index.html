<!DOCTYPE html>
<html>

<head>
	<title>
	Service Mesh 在『路口』的产品思考与实践：务实是根本 · SOFAStack
</title>
	<meta charset="utf-8">
<meta http-equiv="X-UA-Compatible" content="IE=edge,chrome=1">
<meta name="viewport" content="width=device-width,minimum-scale=1">
<meta name="description" content="SOFAStack is a Scalable Open Financial Architecture for building cloud native applications" />

<meta name="generator" content="Hugo 0.55.5" /><link rel="shortcut icon" href=https://img.alicdn.com/imgextra/i3/O1CN019CRHyf1qyMghfS3id_!!6000000005564-2-tps-211-128.png type="image/png">

<link href="https://unpkg.com/purecss@1.0.0/build/base-min.css" rel="stylesheet">



<link href="/sofastack.tech/css/main.css" rel="stylesheet">
<link href="/sofastack.tech/css/zoom-image.css" rel="stylesheet">

<script src="/sofastack.tech/js/iconfont.js"></script>
<script src="/sofastack.tech/js/highlight.pack.js"></script>
<script>hljs.initHighlightingOnLoad();</script>


<script>window.SITE_LANGUAGE = "zh"</script>
<script src="/sofastack.tech/js/app.js"></script>





<script type="application/javascript">
var doNotTrack = false;
if (!doNotTrack) {
	(function(i,s,o,g,r,a,m){i['GoogleAnalyticsObject']=r;i[r]=i[r]||function(){
	(i[r].q=i[r].q||[]).push(arguments)},i[r].l=1*new Date();a=s.createElement(o),
	m=s.getElementsByTagName(o)[0];a.async=1;a.src=g;m.parentNode.insertBefore(a,m)
	})(window,document,'script','https://www.google-analytics.com/analytics.js','ga');
	ga('create', 'UA-142131411-1', 'auto');
	
	ga('send', 'pageview');
}
</script>

</head>

<body>
	<header class="ss-header">
	<nav class="navbar" role="navigation" aria-label="main navigation">
		<div class="navbar-brand">
			<a class="logo-link" href="/sofastack.tech/">
				<img class="logo" src="/sofastack.tech/img/logo-2024.png">
			</a>
			<div class="-show-mobile">
				<a id="mobile-menu-icon">
					<svg class="icon" aria-hidden="true">
						<use xlink:href="#icon-menu"></use>
					</svg>
				</a>
				<nav id="mobile-menu">
						<div id="js-menu-search-mobile" class="navbar-search-mobile">
							<input class="input" placeholder="请输入要搜索的关键词">
							<svg class="icon" aria-hidden="true">
								<use xlink:href="#icon-search"></use>
							</svg>
						</div>
					
          
            <a
              class=""
              href="/sofastack.tech/projects/">
              <span>
                项目
              </span>
              <svg class="icon" aria-hidden="true"><use xlink:href="#icon-ARROW"></use></svg>
            </a>
					
            <a
              class=""
              href="/sofastack.tech/guides/">
              <span>
                指南
              </span>
              <svg class="icon" aria-hidden="true"><use xlink:href="#icon-ARROW"></use></svg>
            </a>
					
            <a
              class=""
              href="/sofastack.tech/blog/">
              <span>
                博客
              </span>
              <svg class="icon" aria-hidden="true"><use xlink:href="#icon-ARROW"></use></svg>
            </a>
					
            <a
              class=""
              href="/sofastack.tech/activities/">
              <span>
                活动
              </span>
              <svg class="icon" aria-hidden="true"><use xlink:href="#icon-ARROW"></use></svg>
            </a>
					
            <a
              class=""
              href="/sofastack.tech/community/">
              <span>
                社区
              </span>
              <svg class="icon" aria-hidden="true"><use xlink:href="#icon-ARROW"></use></svg>
            </a>
					
            <a
              class=""
              href="/sofastack.tech/awesome/">
              <span>
                Awesome SOFA
              </span>
              <svg class="icon" aria-hidden="true"><use xlink:href="#icon-ARROW"></use></svg>
            </a>
					
					
				</nav>
			</div>
		</div>

		<div class="navbar-menu -hidden-mobile">
			<div class="navbar-start">
				
				
					<a class="navbar-item "
						href="/sofastack.tech/projects/">项目</a>
				
					<a class="navbar-item "
						href="/sofastack.tech/guides/">指南</a>
				
					<a class="navbar-item "
						href="/sofastack.tech/blog/">博客</a>
				
					<a class="navbar-item "
						href="/sofastack.tech/activities/">活动</a>
				
					<a class="navbar-item "
						href="/sofastack.tech/community/">社区</a>
				
					<a class="navbar-item "
						href="/sofastack.tech/awesome/">Awesome SOFA</a>
				
			</div>
			<div class="navbar-end">
				<div class="navbar-item">
					<div id="js-menu-search" class="navbar-search">
						<input class="input" placeholder="请输入要搜索的关键词">
						<svg class="icon" aria-hidden="true">
							<use xlink:href="#icon-search"></use>
						</svg>
					</div>
				</div>
				<div class="navbar-item">
					
				</div>
			</div>
		</div>
	</nav>
</header>


	

	

	

	

	

	



	

<div class="ss-layout-container">
	<main class="ss-layout-main -card">
		<div class="ss-meta">
	<h1 class="title">
		Service Mesh 在『路口』的产品思考与实践：务实是根本
	</h1>
	<div class="meta">
		
			2019-12-02 ·
			
				<a href="https://nobodyiam.com/">齐天</a> ·
			
			<span class="tags">
				
					<a class="tag" href="/sofastack.tech/tags/service-mesh/" rel="tag">#Service mesh</a>
				
					<a class="tag" href="/sofastack.tech/tags/service-mesh-%E8%90%BD%E5%9C%B0%E5%AE%9E%E8%B7%B5/" rel="tag">#Service Mesh 落地实践</a>
				
			</span>
		
	</div>
</div>
		<article class="typo">
  <h2 id="一-引言">一、引言</h2>

<p>Service Mesh 是蚂蚁金服下一代架构的核心，经过了2年的沉淀，我们探索出了一套切实可行的方案并最终通过了双十一的考验。本文主要分享在当下『路口』，我们在产品设计上的思考和实践，希望能给大家带来一些启发。</p>

<h2 id="二-为什么需要-service-mesh">二、为什么需要 Service Mesh?</h2>

<h3 id="2-1-微服务治理与业务逻辑解耦">2.1 微服务治理与业务逻辑解耦</h3>

<p>在 Service Mesh 之前，微服务体系的玩法都是由中间件团队提供一个 SDK 给业务应用使用，在 SDK 中会集成各种服务治理的能力，如：服务发现、负载均衡、熔断限流、服务路由等。</p>

<p>在运行时，SDK 和业务应用的代码其实是混合在一个进程中运行的，耦合度非常高，这就带来了一系列的问题：</p>

<ol>
<li>升级成本高

<ol>
<li>每次升级都需要业务应用修改 SDK 版本号，重新发布；</li>
<li>在业务飞速往前跑的时候，是不太愿意停下来做这些和自身业务目标不太相关的事情的；</li>
</ol></li>
<li>版本碎片化严重

<ol>
<li>由于升级成本高，但中间件还是会向前发展，久而久之，就会导致线上 SDK 版本各不统一、能力参差不齐，造成很难统一治理；</li>
</ol></li>
<li>中间件演进困难

<ol>
<li>由于版本碎片化严重，导致中间件向前演进过程中就需要在代码中兼容各种各样的老版本逻辑，戴着『枷锁』前行，无法实现快速迭代；</li>
</ol></li>
</ol>

<p>有了 Service Mesh 之后，我们就可以把 SDK 中的大部分能力从应用中剥离出来，拆解为独立进程，以 Sidecar 的模式部署。通过将服务治理能力下沉到基础设施，可以让业务更加专注于业务逻辑，中间件团队则更加专注于各种通用能力，真正实现独立演进，透明升级，提升整体效率。</p>

<p><img src="https://cdn.nlark.com/yuque/0/2019/png/226702/1575015733234-8ced884b-d9fe-4a85-8006-06b73f4611be.png" alt="decouple" /></p>

<h3 id="2-2-异构系统统一治理">2.2 异构系统统一治理</h3>

<p>随着新技术的发展和人员更替，在同一家公司中往往会出现使用各种不同语言、不同框架的应用和服务，为了能够统一管控这些服务，以往的做法是为每种语言、每种框架都重新开发一套完整的 SDK，维护成本非常高，而且对中间件团队的人员结构也带来了很大的挑战。</p>

<p>有了 Service Mesh 之后，通过将主体的服务治理能力下沉到基础设施，多语言的支持就轻松很多了，只需要提供一个非常轻量的 SDK、甚至很多情况都不需要一个单独的 SDK，就可以方便地实现多语言、多协议的统一流量管控、监控等治理需求。</p>

<p><img src="https://cdn.nlark.com/yuque/0/2019/png/226702/1575015733238-9c438ae3-1aac-4836-bca1-a72722ee32c0.png" alt="multi-language" /></p>

<p><a href="https://www.redhat.com/en/topics/microservices/what-is-a-service-mesh"><em>图片来源</em></a></p>

<h3 id="2-3-金融级网络安全">2.3 金融级网络安全</h3>

<p>当前很多公司的微服务体系建设都建立在『内网可信』的假设之上，然而这个原则在当前大规模上云的背景下可能显得有点不合时宜，尤其是涉及到一些金融场景的时候。</p>

<p>通过 Service Mesh，我们可以更方便地实现应用的身份标识和访问控制，辅之以数据加密，就能实现全链路可信，从而使得服务可以运行于零信任网络中，提升整体安全水位。</p>

<p><img src="https://cdn.nlark.com/yuque/0/2019/png/226702/1575015733267-0b7d1b6a-b9f8-4132-9cfd-25db467b7161.png" alt="security" /></p>

<h2 id="三-在当下-路口-的思考">三、在当下『路口』的思考</h2>

<h3 id="3-1-云原生方案">3.1 云原生方案？</h3>

<p>正因为 Service Mesh 带来了上述种种的好处，所以这两年社区中对 Service Mesh 的关注度越来越高，也涌现出了很多优秀的 Service Mesh 产品，Istio 就是其中一款非常典型的标杆产品。</p>

<p>Istio 以其前瞻的设计结合云原生的概念，一出现就让人眼前一亮，心之向往。不过深入进去看了之后发现，在目前阶段要落地的话，还是存在一些 gap 的。</p>

<p><img src="https://cdn.nlark.com/yuque/0/2019/png/226702/1575015733260-d2ca5457-3aaa-47cb-88eb-a3a360523a3f.png" alt="istio" /></p>

<p><a href="https://istio.io/docs/concepts/what-is-istio/"><em>图片来源</em></a></p>

<h3 id="3-2-greenfield-vs-brownfield">3.2 Greenfield vs Brownfield</h3>

<p>在正式展开讨论之前，我们先来看一副漫画。</p>

<p><img src="https://cdn.nlark.com/yuque/0/2019/png/226702/1575015733270-a05b3046-bb2f-45a3-940a-9e2c66dc7504.png" alt="greenfield-brownfield" /></p>

<p><a href="https://faasandfurious.com/90"><em>图片来源</em></a></p>

<p>上面这幅漫画描绘了这样一个场景：</p>

<ul>
<li>有两个工人在工作，其中一个在绿色的草地（Greenfield）上，另一个在棕色的土地（Brownfield）上；</li>
<li>在绿色草地上的工人对在棕色土地上的工人说：“如果你没有给自己挖这么深的坑，那么你也可以像我一样做一些很棒的新东西”；</li>
<li>然后在棕色土地上的工人回答道：“你倒是下来试试！”；</li>
</ul>

<p>这是一幅很有意思的漫画，从表面上看我们可以认为在绿色草地上的工人是站着说话不腰疼，不过其实本质的原因还是两者所处的环境不同。</p>

<p>在一片未开发过的土地上施工确实是很舒服的，因为空间很大，也没有周遭各种限制，可以使用各种新技术、新理念，我们国家近几十年来的一些新区新城的建设就属于这类。而在一片已经开发过的土地上施工就大不一样了，周围环境会有各种限制，比如地下可能有各种管线，一不小心就挖断了，附近还有各种大楼，稍有不慎就可能把楼给挖塌了，所以做起事来就要非常小心，设计方案时也会受到各种约束，无法自由发挥。</p>

<p>对于软件工程，其实也是一样的，Greenfield 对应着全新的项目或新的系统，Brownfield 对应着成熟的项目或遗留系统。</p>

<p>我相信大部分程序员都是喜欢做全新的项目的，包括我自己也是一样。因为可以使用新的技术、新的框架，可以按照事物本来的样子去做系统设计，自由度很高。而在开发/维护一个成熟的项目时就不太一样了，一方面项目已经稳定运行，逻辑也非常复杂，所以无法很方便地换成新的技术、新的框架，在设计新功能时也会碍于已有的架构和代码实现做很多妥协，另一方面前人可能不知不觉挖了很多坑，稍有不慎就会掉进坑里，所以行事必须要非常小心，尤其是在做大的架构改变的时候。</p>

<h3 id="3-3-现实场景">3.3 现实场景</h3>

<h4 id="3-3-1-brownfield-应用当道">3.3.1 Brownfield 应用当道</h4>

<p>在现实中，我们发现目前大部分的公司还没有走向云原生，或者还刚刚在开始探索，所以大量的应用其实还跑在非 k8s 的体系中，比如跑在虚拟机上或者是基于独立的服务注册中心构建微服务体系。</p>

<p>虽然确实有少量 Greenfield 应用已经在基于云原生来构建了，但现实是那些大量的 Brownfield 应用是公司业务的顶梁柱，承载着更大的业务价值，所以如何把它们纳入 Service Mesh 统一管控，从而带来更大的价值，也就成了更需要优先考虑的话题。</p>

<p><img src="https://cdn.nlark.com/yuque/0/2019/png/226702/1575015733259-bbd4c49e-8aab-44c1-b717-736f4e042509.png" alt="vm" /></p>

<p><a href="https://medium.com/next-level-german-engineering/comparison-of-two-different-approaches-towards-container-management-4e5298736d42">图片来源</a>     </p>

<p><img src="https://cdn.nlark.com/yuque/0/2019/png/226702/1575015733266-e476d1f4-c792-4aa5-a070-448005c2cea2.png" alt="standalone-service-registry.png" /></p>

<p>独立的服务注册中心</p>

<h4 id="3-3-2-云原生方案离生产级尚有一定距离">3.3.2 云原生方案离生产级尚有一定距离</h4>

<p>另一方面，目前 Istio 在整体性能上还存在一些有待解决的点（引述小剑老师在<a href="https://mp.weixin.qq.com/s/XjbmCxdJLKVcFlEUiM7Pig">蚂蚁金服 Service Mesh 深度实践</a>中的观点）：</p>

<ol>
<li><strong>Mixer</strong>

<ol>
<li><strong>Mixer 的性能问题，一直都是 Istio 中最被人诟病的地方；</strong></li>
<li>尤其在 Istio 1.<sup>1</sup>&frasl;<sub>1</sub>.2 版本之后引入了 Out-Of-Process Adapter，更是雪上加霜；</li>
<li>从落地的角度看，<strong>Mixer V1 </strong>糟糕至极的性能，已经是“生命无法承受之重”。对于一般规模的生产级落地而言，Mixer 性能已经是难于接受，更不要提大规模落地……</li>
<li>Mixer V2 方案则给了社区希望：将 Mixer 合并进 Sidecar，引入 web assembly 进行 Adapter 扩展，这是我们期待的 Mixer 落地的正确姿势，是 Mixer 的未来，是 Mixer 的『诗和远方』。然而社区望穿秋水，但Mixer V2 迟迟未能启动，长期处于 In Review 状态，远水解不了近渴；</li>
</ol></li>
<li><strong>Pilot</strong>

<ol>
<li>Pilot 是一个被 Mixer 掩盖的重灾区：长期以来大家的性能关注点都在 Mixer，表现糟糕而且问题明显的Mixer 一直在吸引火力。但是当选择放弃 Mixer（典型如官方在 Istio 新版本中提供的关闭 Mixer 的配置开关）之后，Pilot 的性能问题也就很快浮出水面；</li>
<li>我们实践下来发现 Pilot 目前主要有两大问题：1）无法支撑海量数据 2）每次变化都会触发全量推送，性能较差；</li>
</ol></li>
</ol>

<p><img src="https://cdn.nlark.com/yuque/0/2019/png/226702/1575015733273-b74bdd2b-08e4-4aef-95d6-eac385a62f33.png" alt="mixer" /></p>

<p><a href="https://istio.io/docs/reference/config/policy-and-telemetry/mixer-overview/"><em>图片来源</em></a></p>

<h3 id="3-4-当下-路口-我们该怎么走">3.4 当下『路口』我们该怎么走？</h3>

<p>我们都非常笃信云原生就是未来，是我们的『诗和远方』，但是眼下的现实情况是一方面 Brownfield 应用当道，另一方面云原生的 Service Mesh 方案自身离生产级还有一定的距离，所以在当下这个『路口』我们该怎么走？</p>

<p><img src="https://cdn.nlark.com/yuque/0/2019/png/226702/1575015733292-9c8383ed-fc31-43fb-bd90-d3fb1724d7a1.png" alt="crossroad" /></p>

<p><a href="https://www.inc.com/joel-trammell/people-vs-results-you-dont-have-to-choose.html"><em>图片来源</em></a></p>

<p>我们给出的答案是：</p>

<p><img src="https://cdn.nlark.com/yuque/0/2019/png/226702/1575015733289-9fdb0d64-c27c-4db5-b911-3ee308d61d8f.png" alt="wu-shi" /></p>

<p>其实如前面所述，我们采用 Service Mesh 方案的初心是因为它的架构改变可以带来很多好处，如：服务治理与业务逻辑解耦、异构语言统一治理、金融级网络安全等，而且我们相信这些好处不管对 Greenfield 应用还是 Brownfield 应用都是非常需要的，甚至在现阶段对 Brownfield 应用产生的业务价值会远远大于 Greenfield 应用。</p>

<p>所以从『务实』的角度来看，我们首先还是要探索出一套现阶段切实可行的方案，不仅要支持 Greenfield 应用，更要能支持 Brownfield 应用，从而可以真正把 Service Mesh 落到实处，产生业务价值。</p>

<h2 id="四-蚂蚁金服的产品实践">四、蚂蚁金服的产品实践</h2>

<h3 id="4-1-发展历程和落地规模">4.1 发展历程和落地规模</h3>

<p><img src="https://cdn.nlark.com/yuque/0/2019/png/226702/1575338504473-cf4c88d0-e22c-4b57-8772-2ebe2baadbc8.png" alt="蚂蚁金服 Service Mesh 发展历程" /></p>

<p>Service Mesh 在蚂蚁金服的发展历程，先后经历过如下几个阶段：</p>

<ul>
<li><strong>技术预研</strong> 阶段：2017年底开始调研并探索 Service Mesh 技术，并确定为未来发展方向。</li>
<li><strong>技术探索</strong> 阶段：2018年初开始用 Golang 开发 Sidecar MOSN ，年中开源基于 Istio 的 SOFAMesh 。</li>
<li><strong>小规模落地</strong> 阶段：2018年开始内部落地，第一批场景是替代 Java 语言之外的其他语言的客户端 SDK，之后开始内部小范围试点。</li>
<li><strong>规模落地</strong> 阶段：2019年上半年，作为蚂蚁金服金融级云原生架构升级的主要内容之一，逐渐铺开到蚂蚁金服内部的业务应用，并平稳支撑了618大促。</li>
<li><strong>对外输出</strong> 阶段：2019年9月，SOFAStack 双模微服务平台入驻阿里云开始公测，支持 SOFA, Dubbo 和 Spring Cloud 应用</li>
<li><strong>全面大规模落地</strong> 阶段：2019年下半年，在蚂蚁金服内部的大促核心应用中全面铺开，落地规模非常庞大，而且最终如『丝般顺滑』地支撑了双十一大促。</li>
</ul>

<p>在今年双十一，Service Mesh 覆盖了数百个交易核心链路应用，MOSN 注入的容器数量达到了数十万，双十一当天处理的 QPS 达到了几千万，平均处理响应时间&lt;0.2 ms，MOSN 本身在大促中间完成了数十次的业务无感升级，达到了我们的预期，初步完成了基础设施和业务的第一步的分离，见证了 Mesh 化之后基础设施的迭代速度。</p>

<h3 id="4-2-sofastack-双模微服务平台">4.2 SOFAStack 双模微服务平台</h3>

<p>我们的服务网格产品名是 SOFAStack 双模微服务平台，这里的『双模微服务』是指传统微服务和 Service Mesh 双剑合璧，即『基于 SDK 的传统微服务』可以和『基于 Sidecar 的 Service Mesh 微服务』实现下列目标：</p>

<ul>
<li>互联互通：两个体系中的应用可以相互访问</li>
<li>平滑迁移：应用可以在两个体系中迁移，对于调用该应用的其他应用，做到透明无感知</li>
<li>异构演进：在互联互通和平滑迁移实现之后，我们就可以根据实际情况进行灵活的应用改造和架构演进</li>
</ul>

<p>在控制面上，我们引入了 Pilot 实现配置的下发（如服务路由规则），在服务发现上保留了独立的 SOFA 服务注册中心。</p>

<p>在数据面上，我们使用了自研的 MOSN，不仅支持 SOFA 应用，同时也支持 Dubbo 和 Spring Cloud 应用。
在部署模式上，我们不仅支持容器/K8s，同时也支持虚拟机场景。</p>

<p><img src="https://cdn.nlark.com/yuque/0/2019/png/226702/1575339198543-22f5f16e-f09c-4358-9f5d-0fb5af9baf20.png" alt="SOFAStack 双模微服务平台" /></p>

<h3 id="4-3-大规模场景下的服务发现">4.3 大规模场景下的服务发现</h3>

<p>要在蚂蚁金服落地，首先一个需要考虑的就是如何支撑双十一这样的大规模场景。前面已经提到，目前 Pilot 本身在集群容量上比较有限，无法支撑海量数据，同时每次变化都会触发全量推送，无法应对大规模场景下的服务发现。</p>

<p>所以，我们的方案是保留独立的 SOFA 服务注册中心来支持千万级的服务实例信息和秒级推送，业务应用通过直连 Sidecar 来实现服务注册和发现。</p>

<p><img src="https://cdn.nlark.com/yuque/0/2019/png/226702/1575015733286-1746ff47-202d-48b2-ac62-a1880736656f.png" alt="service-discovery" /></p>

<h3 id="4-4-流量劫持">4.4 流量劫持</h3>

<p>Service Mesh 中另一个重要的话题就是如何实现流量劫持：使得业务应用的 Inbound 和 Outbound 服务请求都能够经过 Sidecar 处理。</p>

<p>区别于社区的 iptables 等流量劫持方案，我们的方案就显得比较简单直白了，以下图为例：</p>

<ol>
<li>假设服务端运行在1.2.3.4这台机器上，监听20880端口，首先服务端会向自己的 Sidecar 发起服务注册请求，告知 Sidecar 需要注册的服务以及 IP + 端口(1.2.3.4:20880)；</li>
<li>服务端的 Sidecar 会向 SOFA 服务注册中心发起服务注册请求，告知需要注册的服务以及 IP + 端口，不过这里需要注意的是注册上去的并不是业务应用的端口(20880)，而是Sidecar自己监听的一个端口(例如：20881)；</li>
<li>调用端向自己的 Sidecar 发起服务订阅请求，告知需要订阅的服务信息；</li>
<li>调用端的Sidecar向调用端推送服务地址，这里需要注意的是推送的IP是本机，端口是调用端的 Sidecar 监听的端口(例如：20882)；</li>
<li>调用端的 Sidecar 会向 SOFA 服务注册中心发起服务订阅请求，告知需要订阅的服务信息；</li>
<li>SOFA 服务注册中心向调用端的 Sidecar 推送服务地址(1.2.3.4:20881)；</li>
</ol>

<p><img src="https://cdn.nlark.com/yuque/0/2019/png/226702/1575015733290-2e0f4734-e91c-4a9e-bda9-e43d2e5f5965.png" alt="sidecar-interception-1" /></p>

<p>经过上述的服务发现过程，流量劫持就显得非常自然了：</p>

<ol>
<li>调用端拿到的『服务端』地址是127.0.0.1:20882，所以就会向这个地址发起服务调用；</li>
<li>调用端的 Sidecar 接收到请求后，通过解析请求头，可以得知具体要调用的服务信息，然后获取之前从服务注册中心返回的地址后就可以发起真实的调用(1.2.3.4:20881)；</li>
<li>服务端的 Sidecar 接收到请求后，经过一系列处理，最终会把请求发送给服务端(127.0.0.1:20880)；</li>
</ol>

<p><img src="https://cdn.nlark.com/yuque/0/2019/png/226702/1575015733319-7c39d011-1dbf-44a6-8850-fba489ca72cb.png" alt="sidecar-interception-2" /></p>

<p>可能会有人问，为啥不采用 iptables 的方案呢？主要的原因是一方面 iptables 在规则配置较多时，性能下滑严重，另一个更为重要的方面是它的管控性和可观测性不好，出了问题比较难排查。</p>

<h3 id="4-5-平滑迁移">4.5 平滑迁移</h3>

<p>平滑迁移可能是整个方案中最为重要的一个环节了，前面也提到，在目前任何一家公司都存在着大量的 Brownfield 应用，它们有些可能承载着公司最有价值的业务，稍有闪失就会给公司带来损失，有些可能是非常核心的应用，稍有抖动就会造成故障，所以对于 Service Mesh 这样一个大的架构改造，平滑迁移是一个必选项，同时还需要支持可灰度和可回滚。</p>

<p>得益于独立的服务注册中心，我们的平滑迁移方案也非常简单直白：</p>

<p><strong>1.初始状态</strong></p>

<p>以一个服务为例，初始有一个服务提供者，有一个服务调用者。</p>

<p><img src="https://cdn.nlark.com/yuque/0/2019/png/226702/1575015733341-c24b98b4-d2a2-42ac-b18e-6eef768f1c91.png" alt="migration-initial" /></p>

<p><strong>2.透明迁移调用方</strong></p>

<p>在我们的方案中，对于先迁移调用方还是先迁移服务方没有任何要求，这里假设调用方希望先迁移到 Service Mesh 上，那么只要在调用方开启 Sidecar 的注入即可，服务方完全不感知调用方是否迁移了。所以调用方可以采用灰度的方式一台一台开启 Sidecar，如果有问题直接回滚即可。</p>

<p><img src="https://cdn.nlark.com/yuque/0/2019/png/226702/1575015733352-6ccef762-cb2c-4e1c-9ef5-31245470d31a.png" alt="migration-consumer" /></p>

<p><strong>3.透明迁移服务方</strong></p>

<p>假设服务方希望先迁移到 Service Mesh 上，那么只要在服务方开启 Sidecar 的注入即可，调用方完全不感知服务方是否迁移了。所以服务方可以采用灰度的方式一台一台开启 Sidecar，如果有问题直接回滚即可。</p>

<p><img src="https://cdn.nlark.com/yuque/0/2019/png/226702/1575015733393-2c4c1067-d136-4b2f-a023-19bcb05272c9.png" alt="migration-provider" /></p>

<p><strong>4.终态</strong></p>

<p><img src="https://cdn.nlark.com/yuque/0/2019/png/226702/1575015733311-75e91db8-5fa5-4c51-8666-0b02c9c45a2f.png" alt="migration-final" /></p>

<h3 id="4-6-多协议支持">4.6 多协议支持</h3>

<p>考虑到目前大部分用户的使用场景，除了 SOFA 应用，我们同时也支持 Dubbo 和 Spring Cloud 应用接入SOFAStack 双模微服务平台，提供统一的服务治理。多协议支持采用通用的 <a href="https://www.servicemesher.com/blog/x-protocol-tcp-protocol-extension/">x-protocol</a>，未来也可以方便地支持更多协议。</p>

<p><img src="https://cdn.nlark.com/yuque/0/2019/png/226702/1575015733332-3ca2f1c9-0384-40fd-af13-0ce640a80936.png" alt="mltiple-protocol" /></p>

<h3 id="4-7-虚拟机支持">4.7 虚拟机支持</h3>

<p>在云原生架构下，Sidecar 借助于 K8s 的 webhook/operator 机制可以方便地实现注入、升级等运维操作。然而大量系统还没有跑在 K8s 上，所以我们通过 agent 的模式来管理 Sidecar 进程，从而可以使 Service Mesh 能够帮助老架构下的应用完成服务化改造，并支持新架构和老架构下服务的统一管理。</p>

<p><img src="https://cdn.nlark.com/yuque/0/2019/png/226702/1575338403799-9aea1529-6194-456a-b667-ef95ff7396ac.png" alt="VM" /></p>

<h3 id="4-8-产品易用性">4.8 产品易用性</h3>

<p>在产品易用性上我们也做了不少工作，比如可以直接在界面上方便地设置服务路由规则、服务限流等，再也不用手工写 yaml 了：</p>

<p><img src="https://cdn.nlark.com/yuque/0/2019/png/226702/1575015733344-42d7a145-2457-4910-beee-0497ca8eda27.png" alt="service-governance" /></p>

<p><img src="https://cdn.nlark.com/yuque/0/2019/png/226702/1575015733373-802d864a-3b8b-43d7-8630-4b0f92e41a25.png" alt="no-yaml" /></p>

<p>也可以在界面上方便地查看服务拓扑和实时监控：</p>

<p><img src="https://cdn.nlark.com/yuque/0/2019/jpeg/226702/1575015733366-c091e2f7-e3ac-478b-a13e-1d3e3b564009.jpeg" alt="tracing" /></p>

<p><img src="https://cdn.nlark.com/yuque/0/2019/png/226702/1575015733342-48c0825c-7859-4632-88cb-2f539faaa62c.png" alt="metrics" /></p>

<h3 id="4-9-阿里云公测中">4.9 阿里云公测中</h3>

<p>最后打一个小小的广告，SOFAStack 双模微服务平台现在在阿里云公测中，欢迎感兴趣的企业前来体验，<a href="https://www.aliyun.com/product/sofa">https://www.aliyun.com/product/sofa</a>。</p>

<p><img src="https://cdn.nlark.com/yuque/0/2019/png/226702/1575015733358-5e5211cb-c7d3-4c96-8884-e5b8d3f4e401.png" alt="sofastack-product" /></p>

<h2 id="五-展望未来">五、展望未来</h2>

<h3 id="5-1-拥抱云原生">5.1 拥抱云原生</h3>

<p>目前已经能非常清楚地看到整个行业在经历从云托管(Cloud Hosted)到云就绪(Cloud Ready)直至云原生(Cloud Native)的过程，所以前面也提到我们都非常笃信云原生就是未来，是我们的『诗和远方』，虽然眼下在落地过程中还存在一定的 gap，不过相信随着我们的持续投入，gap 会越来越小。</p>

<p>另外值得一提的是我们拥抱云原生其根本还在于降低资源成本，提升开发效率，享受生态红利，所以云原生本身不是目的，而是手段，切不可本末倒置了。</p>

<p><img src="https://cdn.nlark.com/yuque/0/2019/png/226702/1575015733359-6813d3b4-0e83-4469-befc-f2db6125fcc7.png" alt="cloud-native-path" /></p>

<h3 id="5-2-持续加强-pilot-的能力">5.2 持续加强 Pilot 的能力</h3>

<p>为了更好地拥抱云原生，后续我们也会和 Istio 社区共建，持续加强 Pilot 的能力。</p>

<p>而就在最近，在综合了过去一年多的思考和探索之后，蚂蚁金服和阿里集团的同事们共同提出了一套完整的解决方案，来融合控制平面和传统注册中心/配置中心，从而可以在保持协议标准化的同时，加强 Pilot 的能力，使其逐步向生产级靠拢。</p>

<p>（更多细节可以参考小剑老师的<a href="https://mp.weixin.qq.com/s/XjbmCxdJLKVcFlEUiM7Pig">蚂蚁金服 Service Mesh 深度实践</a>一文，在此就不再赘述了）</p>

<p><img src="https://cdn.nlark.com/yuque/0/2019/png/226702/1575015733364-96449757-e171-46ba-83ef-da5550218ed3.png" alt="enhanced-pilot" /></p>

<h3 id="5-3-支持透明劫持">5.3 支持透明劫持</h3>

<p>前面提到在蚂蚁金服的实践中是基于服务注册中心来实现流量劫持的，该方案不管是在性能、管控能力还是可观测性方面都是不错的选择，不过对应用存在一定的侵入性（需要引入一个轻量的注册中心 SDK）。</p>

<p>考虑到很多用户对性能要求没那么敏感，同时有大量遗留系统希望通过 Service Mesh 实现统一管控，所以后续我们也会支持透明劫持，同时在管控性和可观测性方面会做增强。</p>

<p><img src="https://cdn.nlark.com/yuque/0/2019/png/226702/1575015733402-012044cf-8b4d-492f-9595-721713202c36.png" alt="transparent-interception" /></p>

<h2 id="六-结语">六、结语</h2>

<p>基于『务实』的理念，Service Mesh 在蚂蚁金服经过了2年的沉淀，我们探索出了一套现阶段切实可行的方案并最终通过了双十一的考验。在这个过程中，我们也愈发体验到了 Service Mesh 带来的好处，例如 MOSN 在大促中间完成了数十次的业务无感升级，见证了 Mesh 化之后基础设施的迭代速度。</p>

<p>我们判断，未来 Service Mesh 会成为云原生下微服务的标准解决方案，所以我们也会持续加大对 Service Mesh 的投入，包括接下来蚂蚁金服将和阿里集团一起深度参与到 Istio 社区中去，和社区一起把 Istio 打造成 Service Mesh 的事实标准。</p>

<p>最后，也欢迎志同道合的伙伴<a href="https://mp.weixin.qq.com/s?__biz=MzUzMzU5Mjc1Nw==&amp;mid=2247485594&amp;idx=2&amp;sn=441d47ac785f59625350e039a036f80b&amp;chksm=faa0e740cdd76e56f6e46870b779da919fc8ef349a5a30dab5cb63c198a934638e5bc926ab40&amp;token=1731714944&amp;lang=zh_CN#rd">加入我们</a>，一起参与建设激动人心的下一代云原生架构！</p>

</article>

<script>
  const article = document.querySelector('article.typo')
  
  const imgElements = article.querySelectorAll('img');
  
  imgElements.forEach(img => {
    const src = img.getAttribute('src');
    
    
      
    
    img.setAttribute('referrerpolicy', 'no-referrer');
  });
</script>


		<div class="-show-mobile">
			

<nav class="ss-pagination-next">
	<a class="link-prev" href="https://sofastack.github.io/sofastack.tech/blog/sofa-weekly-20191129/">
		<span class="text">上一篇: </span>
		<span class="text">SOFA Weekly | 每周精选【11/25 - 11/29】</span>
	</a>
	<a class="link-next" href="https://sofastack.github.io/sofastack.tech/blog/kubernetes-practice-antfinal-shopping-festival/">
		<span class="text">下一篇: </span>
		<span class="text">深入 Kubernetes 的“无人区” — 蚂蚁金服双十一的调度系统</span>
	</a>
</nav>

		</div>
	</main>

	<aside class="ss-layout-aside">
		
		


<div class="ss-card">
	<h2 class="card-title">
		相关推荐
	</h2>
	
	<ul class="ss-aside-related">
		
			<li><a href="/sofastack.tech/blog/service-mesh-practice-in-production-at-ant-financial-part5-gateway/">蚂蚁金服 Service Mesh 大规模落地系列 - 网关篇</a></li>
		
			<li><a href="/sofastack.tech/blog/service-mesh-practice-in-production-at-ant-financial-part4-rpc/">蚂蚁金服 Service Mesh 大规模落地系列 - RPC 篇</a></li>
		
			<li><a href="/sofastack.tech/blog/service-mesh-practice-in-production-at-ant-financial-part3-operation/">蚂蚁金服 Service Mesh 大规模落地系列 - 运维篇</a></li>
		
			<li><a href="/sofastack.tech/blog/service-mesh-practice-in-production-at-ant-financial-part2-mesh/">蚂蚁金服 Service Mesh 大规模落地系列 - 消息篇</a></li>
		
			<li><a href="/sofastack.tech/blog/service-mesh-practice-antfinal-shopping-festival-big-exam/">Service Mesh 落地负责人亲述：蚂蚁金服双十一四大考题</a></li>
		
	</ul>
	
</div>

		<div class="ss-aside-tags ss-card">
	<h2 class="card-title">
		标签
		<span class="card-extra"></span>
	</h2>
	<ul class="tag-list">
		
			<li class="tag"><a href="/sofastack.tech/tags/1024/">1024</a></li>
		
			<li class="tag"><a href="/sofastack.tech/tags/api-gateway/">API Gateway </a></li>
		
			<li class="tag"><a href="/sofastack.tech/tags/cafedeployment/">CAFEDeployment</a></li>
		
			<li class="tag"><a href="/sofastack.tech/tags/cloud-native/">Cloud Native</a></li>
		
			<li class="tag"><a href="/sofastack.tech/tags/cncf/">CNCF</a></li>
		
			<li class="tag"><a href="/sofastack.tech/tags/db-mesh/">DB Mesh</a></li>
		
			<li class="tag"><a href="/sofastack.tech/tags/dragonfly/">Dragonfly</a></li>
		
			<li class="tag"><a href="/sofastack.tech/tags/elasticdl/">ElasticDL</a></li>
		
			<li class="tag"><a href="/sofastack.tech/tags/http/3/">HTTP/3</a></li>
		
			<li class="tag"><a href="/sofastack.tech/tags/http/quic/">HTTP/QUIC</a></li>
		
			<li class="tag"><a href="/sofastack.tech/tags/kata-container/">Kata Container</a></li>
		
			<li class="tag"><a href="/sofastack.tech/tags/kata-containers/">Kata Containers</a></li>
		
			<li class="tag"><a href="/sofastack.tech/tags/knative/">Knative</a></li>
		
			<li class="tag"><a href="/sofastack.tech/tags/kubecon/">KubeCon</a></li>
		
			<li class="tag"><a href="/sofastack.tech/tags/kubernetes/">Kubernetes</a></li>
		
			<li class="tag"><a href="/sofastack.tech/tags/meetup/">Meetup</a></li>
		
			<li class="tag"><a href="/sofastack.tech/tags/mosn/">MOSN</a></li>
		
			<li class="tag"><a href="/sofastack.tech/tags/nydus/">Nydus</a></li>
		
			<li class="tag"><a href="/sofastack.tech/tags/occlum/">Occlum</a></li>
		
			<li class="tag"><a href="/sofastack.tech/tags/rpc-%E6%A1%86%E6%9E%B6%E8%AE%BE%E8%AE%A1%E7%9A%84%E8%80%83%E5%92%8C%E9%87%8F/">RPC 框架设计的考和量</a></li>
		
			<li class="tag"><a href="/sofastack.tech/tags/seata/">Seata</a></li>
		
			<li class="tag"><a href="/sofastack.tech/tags/serverless/">Serverless</a></li>
		
			<li class="tag"><a href="/sofastack.tech/tags/serverlesstask/">ServerlessTask</a></li>
		
			<li class="tag"><a href="/sofastack.tech/tags/service-mesh/">Service Mesh</a></li>
		
			<li class="tag"><a href="/sofastack.tech/tags/service-mesh-meetup/">Service Mesh Meetup</a></li>
		
			<li class="tag"><a href="/sofastack.tech/tags/service-mesh-virtual-meetup/">Service Mesh Virtual Meetup</a></li>
		
			<li class="tag"><a href="/sofastack.tech/tags/service-mesh-webinar/">Service Mesh Webinar</a></li>
		
			<li class="tag"><a href="/sofastack.tech/tags/service-mesh-%E8%90%BD%E5%9C%B0%E5%AE%9E%E8%B7%B5/">Service Mesh 落地实践</a></li>
		
			<li class="tag"><a href="/sofastack.tech/tags/sidecar-%E5%AE%B9%E5%99%A8/">Sidecar 容器</a></li>
		
			<li class="tag"><a href="/sofastack.tech/tags/sofa/">SOFA</a></li>
		
			<li class="tag"><a href="/sofastack.tech/tags/sofa-weekly/">SOFA Weekly</a></li>
		
			<li class="tag"><a href="/sofastack.tech/tags/sofaacts/">SOFAActs</a></li>
		
			<li class="tag"><a href="/sofastack.tech/tags/sofaark/">SOFAArk</a></li>
		
			<li class="tag"><a href="/sofastack.tech/tags/sofaarklab/">SOFAArkLab</a></li>
		
			<li class="tag"><a href="/sofastack.tech/tags/sofabolt/">SOFABolt</a></li>
		
			<li class="tag"><a href="/sofastack.tech/tags/sofaboot/">SOFABoot</a></li>
		
			<li class="tag"><a href="/sofastack.tech/tags/sofachannel/">SOFAChannel</a></li>
		
			<li class="tag"><a href="/sofastack.tech/tags/sofadashboard/">SOFADashboard</a></li>
		
			<li class="tag"><a href="/sofastack.tech/tags/sofaenclave/">SOFAEnclave</a></li>
		
			<li class="tag"><a href="/sofastack.tech/tags/sofajraft/">SOFAJRaft</a></li>
		
			<li class="tag"><a href="/sofastack.tech/tags/sofajraft-%E7%89%B9%E6%80%A7%E8%A7%A3%E6%9E%90/">SOFAJRaft 特性解析</a></li>
		
			<li class="tag"><a href="/sofastack.tech/tags/sofalab/">SOFALab</a></li>
		
			<li class="tag"><a href="/sofastack.tech/tags/sofalookout/">SOFALookout</a></li>
		
			<li class="tag"><a href="/sofastack.tech/tags/sofameetup/">SOFAMeetup</a></li>
		
			<li class="tag"><a href="/sofastack.tech/tags/sofamesh/">SOFAMesh</a></li>
		
			<li class="tag"><a href="/sofastack.tech/tags/sofaregistry/">SOFARegistry</a></li>
		
			<li class="tag"><a href="/sofastack.tech/tags/sofarpc/">SOFARPC</a></li>
		
			<li class="tag"><a href="/sofastack.tech/tags/sofastack/">SOFAStack</a></li>
		
			<li class="tag"><a href="/sofastack.tech/tags/sofastack-%E5%BC%80%E6%BA%90%E4%B9%8B%E5%A4%8F/">SOFAStack 开源之夏</a></li>
		
			<li class="tag"><a href="/sofastack.tech/tags/sofastak/">SOFAStak</a></li>
		
			<li class="tag"><a href="/sofastack.tech/tags/sofatalk/">SOFATalk</a></li>
		
			<li class="tag"><a href="/sofastack.tech/tags/sofatracer/">SOFATracer</a></li>
		
			<li class="tag"><a href="/sofastack.tech/tags/springboot/">SpringBoot</a></li>
		
			<li class="tag"><a href="/sofastack.tech/tags/sqlflow/">SQLFlow</a></li>
		
			<li class="tag"><a href="/sofastack.tech/tags/summer-2021/">Summer 2021</a></li>
		
			<li class="tag"><a href="/sofastack.tech/tags/workshop/">Workshop</a></li>
		
			<li class="tag"><a href="/sofastack.tech/tags/zsearch/">ZSearch</a></li>
		
			<li class="tag"><a href="/sofastack.tech/tags/%E4%BA%91%E5%8E%9F%E7%94%9F/">云原生</a></li>
		
			<li class="tag"><a href="/sofastack.tech/tags/%E4%BB%BB%E5%8A%A1%E8%B0%83%E5%BA%A6/">任务调度</a></li>
		
			<li class="tag"><a href="/sofastack.tech/tags/%E4%BD%A0%E7%9A%84%E5%BC%80%E6%BA%90%E5%85%A5%E9%97%A8%E6%8C%87%E5%8D%97/">你的开源入门指南</a></li>
		
			<li class="tag"><a href="/sofastack.tech/tags/%E5%88%86%E5%B8%83%E5%BC%8F/">分布式</a></li>
		
			<li class="tag"><a href="/sofastack.tech/tags/%E5%88%86%E5%B8%83%E5%BC%8F%E4%BA%8B%E5%8A%A1/">分布式事务</a></li>
		
			<li class="tag"><a href="/sofastack.tech/tags/%E5%88%86%E5%B8%83%E5%BC%8F%E6%9E%B6%E6%9E%84/">分布式架构</a></li>
		
			<li class="tag"><a href="/sofastack.tech/tags/%E5%89%96%E6%9E%90-sofaark-%E6%BA%90%E7%A0%81/">剖析 | SOFAArk 源码</a></li>
		
			<li class="tag"><a href="/sofastack.tech/tags/%E5%89%96%E6%9E%90-sofabolt-%E6%A1%86%E6%9E%B6/">剖析 | SOFABolt 框架</a></li>
		
			<li class="tag"><a href="/sofastack.tech/tags/%E5%89%96%E6%9E%90-sofaboot-%E6%A1%86%E6%9E%B6/">剖析 | SOFABoot 框架</a></li>
		
			<li class="tag"><a href="/sofastack.tech/tags/%E5%89%96%E6%9E%90-sofajraft-%E5%AE%9E%E7%8E%B0%E5%8E%9F%E7%90%86/">剖析 | SOFAJRaft 实现原理</a></li>
		
			<li class="tag"><a href="/sofastack.tech/tags/%E5%89%96%E6%9E%90-sofaregistry-%E6%A1%86%E6%9E%B6/">剖析 | SOFARegistry 框架</a></li>
		
			<li class="tag"><a href="/sofastack.tech/tags/%E5%89%96%E6%9E%90-sofarpc-%E6%A1%86%E6%9E%B6/">剖析 | SOFARPC 框架</a></li>
		
			<li class="tag"><a href="/sofastack.tech/tags/%E5%89%96%E6%9E%90-sofatracer-%E6%A1%86%E6%9E%B6/">剖析 | SOFATracer 框架</a></li>
		
			<li class="tag"><a href="/sofastack.tech/tags/%E5%AE%9E%E8%B7%B5/">实践</a></li>
		
			<li class="tag"><a href="/sofastack.tech/tags/%E5%BC%80%E6%BA%90/">开源</a></li>
		
			<li class="tag"><a href="/sofastack.tech/tags/%E5%BC%80%E6%BA%90%E4%B9%8B%E5%A4%8F/">开源之夏</a></li>
		
			<li class="tag"><a href="/sofastack.tech/tags/%E5%BC%80%E6%BA%90%E4%BA%94%E5%91%A8%E5%B9%B4/">开源五周年</a></li>
		
			<li class="tag"><a href="/sofastack.tech/tags/%E5%BC%80%E6%BA%90%E5%85%AD%E5%91%A8%E5%B9%B4/">开源六周年</a></li>
		
			<li class="tag"><a href="/sofastack.tech/tags/%E5%BC%80%E6%BA%90%E5%AE%B9%E5%99%A8%E9%95%9C%E5%83%8F%E5%8A%A0%E9%80%9F%E6%9C%8D%E5%8A%A1%E7%9A%84%E6%BC%94%E8%BF%9B%E4%B8%8E%E6%9C%AA%E6%9D%A5/">开源容器镜像加速服务的演进与未来</a></li>
		
			<li class="tag"><a href="/sofastack.tech/tags/%E5%BC%B9%E6%80%A7%E4%BC%B8%E7%BC%A9/">弹性伸缩</a></li>
		
			<li class="tag"><a href="/sofastack.tech/tags/%E5%BE%AE%E6%9C%8D%E5%8A%A1/">微服务</a></li>
		
			<li class="tag"><a href="/sofastack.tech/tags/%E6%96%87%E4%BB%B6%E5%92%8C%E9%95%9C%E5%83%8F%E5%8A%A0%E9%80%9F%E7%B3%BB%E7%BB%9F/">文件和镜像加速系统</a></li>
		
			<li class="tag"><a href="/sofastack.tech/tags/%E6%99%BA%E8%83%BD%E7%9B%91%E6%8E%A7/">智能监控</a></li>
		
			<li class="tag"><a href="/sofastack.tech/tags/%E6%99%BA%E8%83%BD%E8%BF%90%E7%BB%B4/">智能运维</a></li>
		
			<li class="tag"><a href="/sofastack.tech/tags/%E6%BA%90%E5%88%9B%E4%BC%9A/">源创会</a></li>
		
			<li class="tag"><a href="/sofastack.tech/tags/%E6%BA%90%E7%A0%81%E8%A7%A3%E6%9E%90/">源码解析</a></li>
		
			<li class="tag"><a href="/sofastack.tech/tags/%E7%B1%BB%E9%9A%94%E7%A6%BB%E6%A1%86%E6%9E%B6/">类隔离框架</a></li>
		
			<li class="tag"><a href="/sofastack.tech/tags/%E9%95%9C%E5%83%8F/">镜像</a></li>
		
	</ul>
</div>
	</aside>
</div>



	


<footer class="ss-footer">
	<div class="container">
		<div class="links">
			
				<div class="cate">
					<h2 class="cate-title">资源</h2>
					
						<a class="link" href="https://github.com/sofastack">Github</a>
					
						<a class="link" href="https://gitee.com/sofastack/">Gitee</a>
					
						<a class="link" href="https://github.com/sofastack-guides">示例</a>
					
				</div>
			
				<div class="cate">
					<h2 class="cate-title">社交媒体</h2>
					
						<a class="link" href="https://zhuanlan.zhihu.com/sofastack">知乎专栏</a>
					
						<a class="link" href="https://weibo.com/sofastack">新浪微博</a>
					
						<a class="link" href="https://twitter.com/sofastack_io">Twitter</a>
					
				</div>
			
				<div class="cate">
					<h2 class="cate-title">参与进来</h2>
					
						<a class="link" href="https://github.com/sofastack/sofastack.tech/issues/new">反馈</a>
					
						<a class="link" href="https://github.com/sofastack/community">社区</a>
					
						<a class="link" href="https://github.com/sofastack/sofastack.tech/wiki">Wiki</a>
					
						<a class="link" href="mailto:sofa@alipay.cloud.com">Email</a>
					
						<a class="link" href="/hr/">加入我们</a>
					
				</div>
			
				<div class="cate">
					<h2 class="cate-title">蚂蚁集团开源项目</h2>
					
						<a class="link" href="https://ant.design/">Ant Design</a>
					
						<a class="link" href="https://eggjs.org/">Egg </a>
					
						<a class="link" href="https://sqlflow.org">SQLFlow</a>
					
						<a class="link" href="https://tech.antfin.com/open-source">更多</a>
					
				</div>
			
		</div>
		<div class="qrcode">
			
				<div>
					<img class="qrcode-img" src="/sofastack.tech/img/qrcode/qrcode_video_2024.jpg" />
					<p class="qrcode-desc">微信视频号</p>
				</div>
			
				<div>
					<img class="qrcode-img" src="/sofastack.tech/img/qrcode/qrcode_1_2024.jpg" />
					<p class="qrcode-desc">微信公众号</p>
				</div>
			
				<div>
					<img class="qrcode-img" src="/sofastack.tech/img/qrcode/dingtalk_qrcode_20241118.png" />
					<p class="qrcode-desc">钉钉群</p>
				</div>
			
		</div>
	</div>
	<div class="copyright">
		<p>
			© 2018 - 2022  The SOFAStack Authors
			<a href="http://beian.miit.gov.cn/">浙 ICP 备 16045294 号-3</a>
		</p>
	</div>
</footer>

</body>

</html>