<!DOCTYPE html>
<html>

<head>
	<title>
	SOFABoot 4.0 正式发布，多项新特性等你来体验！ · SOFAStack
</title>
	<meta charset="utf-8">
<meta http-equiv="X-UA-Compatible" content="IE=edge,chrome=1">
<meta name="viewport" content="width=device-width,minimum-scale=1">
<meta name="description" content="SOFAStack is a Scalable Open Financial Architecture for building cloud native applications" />

<meta name="generator" content="Hugo 0.55.5" /><link rel="shortcut icon" href=https://img.alicdn.com/imgextra/i3/O1CN019CRHyf1qyMghfS3id_!!6000000005564-2-tps-211-128.png type="image/png">

<link href="https://unpkg.com/purecss@1.0.0/build/base-min.css" rel="stylesheet">



<link href="/sofastack.tech/css/main.css" rel="stylesheet">
<link href="/sofastack.tech/css/zoom-image.css" rel="stylesheet">

<script src="/sofastack.tech/js/iconfont.js"></script>
<script src="/sofastack.tech/js/highlight.pack.js"></script>
<script>hljs.initHighlightingOnLoad();</script>


<script>window.SITE_LANGUAGE = "zh"</script>
<script src="/sofastack.tech/js/app.js"></script>





<script type="application/javascript">
var doNotTrack = false;
if (!doNotTrack) {
	(function(i,s,o,g,r,a,m){i['GoogleAnalyticsObject']=r;i[r]=i[r]||function(){
	(i[r].q=i[r].q||[]).push(arguments)},i[r].l=1*new Date();a=s.createElement(o),
	m=s.getElementsByTagName(o)[0];a.async=1;a.src=g;m.parentNode.insertBefore(a,m)
	})(window,document,'script','https://www.google-analytics.com/analytics.js','ga');
	ga('create', 'UA-142131411-1', 'auto');
	
	ga('send', 'pageview');
}
</script>

</head>

<body>
	<header class="ss-header">
	<nav class="navbar" role="navigation" aria-label="main navigation">
		<div class="navbar-brand">
			<a class="logo-link" href="/sofastack.tech/">
				<img class="logo" src="/sofastack.tech/img/logo-2024.png">
			</a>
			<div class="-show-mobile">
				<a id="mobile-menu-icon">
					<svg class="icon" aria-hidden="true">
						<use xlink:href="#icon-menu"></use>
					</svg>
				</a>
				<nav id="mobile-menu">
						<div id="js-menu-search-mobile" class="navbar-search-mobile">
							<input class="input" placeholder="请输入要搜索的关键词">
							<svg class="icon" aria-hidden="true">
								<use xlink:href="#icon-search"></use>
							</svg>
						</div>
					
          
            <a
              class=""
              href="/sofastack.tech/projects/">
              <span>
                项目
              </span>
              <svg class="icon" aria-hidden="true"><use xlink:href="#icon-ARROW"></use></svg>
            </a>
					
            <a
              class=""
              href="/sofastack.tech/guides/">
              <span>
                指南
              </span>
              <svg class="icon" aria-hidden="true"><use xlink:href="#icon-ARROW"></use></svg>
            </a>
					
            <a
              class=""
              href="/sofastack.tech/blog/">
              <span>
                博客
              </span>
              <svg class="icon" aria-hidden="true"><use xlink:href="#icon-ARROW"></use></svg>
            </a>
					
            <a
              class=""
              href="/sofastack.tech/activities/">
              <span>
                活动
              </span>
              <svg class="icon" aria-hidden="true"><use xlink:href="#icon-ARROW"></use></svg>
            </a>
					
            <a
              class=""
              href="/sofastack.tech/community/">
              <span>
                社区
              </span>
              <svg class="icon" aria-hidden="true"><use xlink:href="#icon-ARROW"></use></svg>
            </a>
					
            <a
              class=""
              href="/sofastack.tech/awesome/">
              <span>
                Awesome SOFA
              </span>
              <svg class="icon" aria-hidden="true"><use xlink:href="#icon-ARROW"></use></svg>
            </a>
					
					
				</nav>
			</div>
		</div>

		<div class="navbar-menu -hidden-mobile">
			<div class="navbar-start">
				
				
					<a class="navbar-item "
						href="/sofastack.tech/projects/">项目</a>
				
					<a class="navbar-item "
						href="/sofastack.tech/guides/">指南</a>
				
					<a class="navbar-item "
						href="/sofastack.tech/blog/">博客</a>
				
					<a class="navbar-item "
						href="/sofastack.tech/activities/">活动</a>
				
					<a class="navbar-item "
						href="/sofastack.tech/community/">社区</a>
				
					<a class="navbar-item "
						href="/sofastack.tech/awesome/">Awesome SOFA</a>
				
			</div>
			<div class="navbar-end">
				<div class="navbar-item">
					<div id="js-menu-search" class="navbar-search">
						<input class="input" placeholder="请输入要搜索的关键词">
						<svg class="icon" aria-hidden="true">
							<use xlink:href="#icon-search"></use>
						</svg>
					</div>
				</div>
				<div class="navbar-item">
					
				</div>
			</div>
		</div>
	</nav>
</header>


	

	

	

	

	

	



	

<div class="ss-layout-container">
	<main class="ss-layout-main -card">
		<div class="ss-meta">
	<h1 class="title">
		SOFABoot 4.0 正式发布，多项新特性等你来体验！
	</h1>
	<div class="meta">
		
			2023-07-11 ·
			
				<a href="https://github.com/sofastack"></a> ·
			
			<span class="tags">
				
					<a class="tag" href="/sofastack.tech/tags/sofastak/" rel="tag">#SOFAStak</a>
				
			</span>
		
	</div>
</div>
		<article class="typo">
  <p><img src="https://p3-juejin.byteimg.com/tos-cn-i-k3u1fbpfcp/c2c467481d7844019332576418b5093c~tplv-k3u1fbpfcp-zoom-1.image" alt="图片" /></p>

<h1 id="part-1-亿点点-新特性">Part.1 「亿点点」新特性</h1>

<h2 id="基于-java-17">基于 Java 17</h2>

<p>SOFABoot 4.0 依赖 Java 17 作为最小支持的 JDK 版本。如果你的应用目前使用 Java 8 或 11，你需要先将自己的 JDK 版本升级到 17 才能基于 SOFABoot 4.0 进行开发。</p>

<h2 id="二方库升级">二方库升级</h2>

<p>SOFABoot 4.0 基于 Spring Boot 3.0 与 Spring Framework 6 构建。在 Spring Boot 3.0 与 Spring Framework 6 引入的二方库升级列表可参考文档👉 <a href="https://github.com/spring-projects/spring-boot/wiki/Spring-Boot-3.0-Release-Notes">Spring Boot 3.0 Release Notes</a></p>

<p><strong>在 SOFABoot 4.0 引入的二方库升级列表如下</strong>：</p>

<ul>
<li>Spring Boot 3.0.5</li>
<li>Spring Cloud 4.0.0</li>
<li>Spring Cloud Stream 3.2.6</li>
<li>SOFA Common tools 2.0.0</li>
<li>SOFATracer 4.0.0</li>
<li>SOFARPC 5.10.0</li>
<li>FastJson 1.2.83</li>
<li>Guava 31.1-jre</li>
<li>Grpc 1.51.1</li>
<li>Grpc common protos 2.11.0</li>
<li>Druid 1.2.16</li>
<li>ASM 9.4</li>
<li>Javassist 3.29.2-GA</li>
<li>Curator 4.3.0</li>
<li>Dubbo 3.1.8</li>
<li>Nacos 2.0.3</li>
<li>Swagger 1.6.7</li>
<li>Swagger2 2.2.8</li>
</ul>

<h2 id="基于-jakarta-ee">基于 Jakarta EE</h2>

<p>Spring Boot 3.0 中依赖 Jakarta EE 规范的部分已经升级到了 Jakarta EE 10 版本。例如，使用 Servlet 6.0 和 JPA 3.1 规范。因此，部分包的命名空间也进行了替换，例如你应该使用：</p>

<p>✅<code>jakarta.servlet.Filter</code></p>

<p>而不是 <code>javax.servlet.Filter</code>。</p>

<p>同时，如果你使用了自己的依赖提供 Jakarta EE 规范的 API，需注意进行对应的依赖升级，例如你应该使用：</p>

<p>✅<code>jakarta.servlet:jakarta.servlet-api</code></p>

<p>而不是 <code>javax.servlet:javax.servlet-api</code>。</p>

<p>可参考文档：<a href="https://docs.openrewrite.org/recipes/java/migrate/jakarta/javaxmigrationtojakarta">Migrate to Jakarta EE 9</a> 来修改 Jakarta 相关的包名以及依赖。</p>

<h2 id="支持-sofaark-2-0">支持 SOFAArk 2.0</h2>

<p><a href="https://www.sofastack.tech/projects/sofa-boot/sofa-ark-migration-guide/">SOFAArk 2.0 模式</a>是 SOFAArk 框架的整体优化版本，相较于 SOFAArk 1.0 模式，它的整体优化思路和原则是 Ark Master Biz 保持和原生 SOFABoot 保持一致，弱化复杂的 Ark Plugin 类管控机制，将 Ark Plugin 与 Master Biz 合并。使得 Ark Master Biz 和原生 SOFABoot 应用的启动方式、类加载方式保持一致，大大降低了 Master Biz 应用的编程难度。</p>

<p>SOFABoot 4.0 版本不再支持 SOFAArk 1.0 模式，如果你想要在 SOFABoot 应用中使用 SOFAArk 2.0 模式，可以按照以下步骤进行操作：</p>

<p><strong>1、在项目中引入 SOFAArk 组件依赖</strong></p>

<pre><code class="language-xml">&lt;dependency&gt;  
&lt;groupId&gt;com.alipay.sofa&lt;/groupId&gt;  
&lt;artifactId&gt;ark-sofa-boot-starter&lt;/artifactId&gt;
&lt;/dependency&gt;

</code></pre>

<p><strong>2、添加 Spring Boot 的 Package 插件</strong></p>

<pre><code class="language-xml">&lt;build&gt;
    &lt;plugins&gt;
        &lt;plugin&gt;
            &lt;groupId&gt;org.springframework.boot&lt;/groupId&gt;
            &lt;artifactId&gt;spring-boot-maven-plugin&lt;/artifactId&gt;

            &lt;configuration&gt;
                &lt;outputDirectory&gt;target&lt;/outputDirectory&gt;
                &lt;classifier&gt;ark-biz&lt;/classifier&gt;
            &lt;/configuration&gt;
            &lt;executions&gt;
                &lt;execution&gt;
                    &lt;id&gt;package&lt;/id&gt;
                    &lt;goals&gt;
                        &lt;goal&gt;repackage&lt;/goal&gt;
                    &lt;/goals&gt;
                &lt;/execution&gt;
            &lt;/executions&gt;
        &lt;/plugin&gt;
    &lt;/plugins&gt;
&lt;/build&gt;
</code></pre>

<p><strong>3、启动应用</strong></p>

<ul>
<li>方式一：</li>
</ul>

<p>IDEA 启动，注意需要添加启动参数：<code>-Dsofa.ark.embed.enable=true -Dcom.alipay.sofa.ark.master.biz=${bizName}</code></p>

<ul>
<li>方式二：</li>
</ul>

<p>命令行启动，先运行 <code>mvn clean package</code> 命令进行打包，生成 ${bizName}-${bizVersion}-ark-biz.jar 的可执行文件，然后在终端运行以下启动参数：</p>

<p><code>java -jar -Dsofa.ark.embed.enable=true -Dcom.alipay.sofa.ark.master.biz=${bizName} ${bizName}-${bizVersion}-ark-biz.jar</code></p>

<h2 id="支持场景化的按配置加载能力">支持场景化的按配置加载能力</h2>

<p>通常情况下，应用在不同的场景下可能需要开启或者关闭不同的功能，Spring Boot 提供了丰富的 Configuration 动态配置能力[4] 能力以支持应用在不同的场景下加载不同的 Bean。<br />
SOFABoot 在此基础上，对 <code>org.springframework.context.ApplicationContextInitializer</code> 等扩展点进行了增强，支持通过统一风格的配置定制各类 Bean 以及扩展点的开启与关闭，并提供了定制模版配置的开启方式以降低应用配置项的复杂度。</p>

<ul>
<li>通过：</li>
</ul>

<p><code>com.alipay.sofa.boot.autoconfigure.condition.ConditionalOnSwitch</code> 注解为 Bean 添加按配置开启能力：</p>

<pre><code class="language-java">@Configuration(proxyBeanMethods = false)
@ConditionalOnSwitch(id=&quot;sample&quot;)
public class SampleConfiguration {

    @Bean
    public SampleBean sampleBean() {
        return new SampleBean();
    }
}
</code></pre>

<p>添加：</p>

<p><code>sofa.boot.switch.bean.sample.enabled=false</code> 配置后，<code>SampleConfiguration</code> 配置类将不再加载。</p>

<ul>
<li>通过继承：</li>
</ul>

<p><code>com.alipay.sofa.boot.Initializer.SwitchableApplicationContextInitializer</code> 类为：</p>

<p><code>ApplicationContextInitializer</code> 添加按配置开启能力：</p>

<pre><code class="language-java">public class SampleSwitchSpringContextInitializer extends
                                                     SwitchableApplicationContextInitializer {
    @Override
    protected void doInitialize(ConfigurableApplicationContext applicationContext) {
        applicationContext.getEnvironment().addActiveProfile(&quot;sampleswitchtest&quot;);
    }

    @Override
    protected String switchKey() {
        return &quot;sample&quot;;
    }

}
</code></pre>

<p>添加：</p>

<p><code>sofa.boot.switch.initializer.sample.enabled=false</code> 配置后，</p>

<p><code>SampleSwitchSpringContextInitializer</code> 类将不再执行 <code>doInitialize</code> 方法。</p>

<ul>
<li>通过继承：</li>
</ul>

<p><code>com.alipay.sofa.boot.listener.SwitchableApplicationListener</code> 类为：</p>

<p><code>ApplicationListener</code> 添加添加按配置开启能力：</p>

<pre><code class="language-java">public class SampleSwitchApplicationListener
                                                 extends
                                                 SwitchableApplicationListener&lt;ContextRefreshedEvent&gt; {

    @Override
    protected void doOnApplicationEvent(ContextRefreshedEvent event) {
        SampleBean sampleBean = event.getApplicationContext().getBean(SampleBean.class);
        sampleBean.setTrigger(true);
    }

    @Override
    protected String switchKey() {
        return &quot;sample&quot;;
    }

}
</code></pre>

<p>添加：</p>

<p><code>sofa.boot.switch.listener.sample.enabled=false</code> 配置后，</p>

<p><code>SampleSwitchApplicationListener</code> 类将不再执行 <code>doOnApplicationEvent</code> 方法。</p>

<p>在使用上述扩展点为你的 Bean 和扩展点添加按配置开启能力后，你可以在 <code>/sofa-boot/scenens</code> 目录下添加指定场景名 <code>scene-key</code> 前缀的配置文件 <em>（支持 application 及 yaml 格式）</em> ，在配置文件中添加该场景下的配置文件模版，例如：</p>

<pre><code>sofa.boot.switch.bean.a.enabled=false
sofa.boot.switch.bean.b.enabled=true
sofa.boot.switch.initializer.a.enabled=false
sofa.boot.switch.initializer.b.enabled=false
sofa.boot.switch.initializer.c.enabled=false
</code></pre>

<p>当你的应用打包后，你只需要添加配置 <code>sofa.boot.scenens=scene-key</code> 便可以生效 <code>/sofa-boot/scenens/scene-key.properites</code> 配置文件中的开关配置。该配置项同时支持配置多个场景名，可以同时生效多个场景配置文件。</p>

<h2 id="启动耗时统计能力增强">启动耗时统计能力增强</h2>

<p>SOFABoot 在 3.6.0 版本提供了 <code>/actuator/startup</code> 能力用于查询应用启动过程中的耗时细节。后来，Spring Boot 在 2.4 版本也提供了官方的 <code>/actuator/startup</code> 能力用于展示应用启动耗时详情。在 SOFA Boot 4.0 版本中，我们整合了 SOFA Boot 与 Spring Boot 提供的启动耗时统计能力：</p>

<ul>
<li><p>保留了 SOFABoot 特有的阶段耗时统计能力，例如 SOFA 模块化刷新耗时统计、健康检查耗时统计等；</p></li>

<li><p>使用 Spring Framework 提供的 <code>org.springframework.boot.context.metrics.buffering.BufferingApplicationStartup</code> 统计 Applicaiton Context 的启动耗时详情。</p></li>
</ul>

<p>你可以通过下述方式使用 SOFABoot 增强的 <code>/actuator/startup</code> 能力：</p>

<p><strong>1、在项目中引入 actuator 组件依赖：</strong></p>

<pre><code class="language-xml">&lt;dependency&gt;
  &lt;groupId&gt;com.alipay.sofa&lt;/groupId&gt;
  &lt;artifactId&gt;actuator-sofa-boot-starter&lt;/artifactId&gt;
&lt;/dependency&gt;
</code></pre>

<p><strong>2、使用：</strong></p>

<p><code>com.alipay.sofa.boot.startup.StartupSpringApplication</code> <strong>作为启动类启动应用：</strong></p>

<pre><code class="language-java">public static void main(String[] args) {
    StartupSpringApplication startupSpringApplication = new StartupSpringApplication(Sofaboot4DemoApplication.class);
    startupSpringApplication.run(args);
}
</code></pre>

<p><strong>3、启动应用后，访问：</strong></p>

<p>localhost:8080/actuator/startup <strong>查看启动耗时详情信息。</strong></p>

<h2 id="更丰富的-spi">更丰富的 SPI</h2>

<p>SOFABoot 4.0 版本中新增了大量 SPI ，你可以通过这些 SPI 定制 SOFABoot 框架的运行逻辑。</p>

<ul>
<li><strong>添加自定义的启动耗时阶段信息</strong></li>
</ul>

<p><code>com.alipay.sofa.boot.startup.StartupReporterAware</code> 接口的使用方式与 <code>org.springframework.context.ApplicationContextAware</code> 接口的使用方法使用类似，当你的 Bean 实现了该接口时，你可以感知到应用中的：<code>com.alipay.sofa.boot.startup.StartupReporter</code> 实例。</p>

<p><code>com.alipay.sofa.boot.startup.StartupReporter</code> 类用于管理 SOFABoot 提供的 <code>/actuator/startup</code> 耗时信息，你可以通过 <code>com.alipay.sofa.boot.startup.StartupReporter#addCommonStartupStat</code> 方法添加你定制的耗时阶段信息。</p>

<ul>
<li><strong>添加自定义的 Bean 启动耗时信息</strong></li>
</ul>

<p><code>com.alipay.sofa.boot.startup.BeanStatCustomizer</code> 接口用于定制 SOFABoot 提供的 <code>/actuator/startup</code> 耗时信息中的 Bean 启动耗时特征。如果你想注册自定义的 <code>com.alipay.sofa.boot.startup.BeanStatCustomizer</code> 接口实现类，需要在 <code>META-INF/spring.factories</code> 文件注册 Spring Factories 形式的 SPI。你可以参考框架内置的 <code>com.alipay.sofa.runtime.startup.ComponentBeanStatCustomizer</code> 类用于提取 ServiceFactoryBean 类型的 Bean 的 Interface 字段用于展示。</p>

<ul>
<li><strong>定制 BeanPostProcessor 与 BeanFactoryPostProcessor 在 SOFA 上下文中的共享模式</strong></li>
</ul>

<p>在开启模块化隔离特性时，你在 Spring Boot 上下文中注册的 <code>BeanPostProcessor</code> 以及 <code>BeanFactoryPostProcessor</code> 将 BeanDefinition 将被共享至所有的 SOFA 模块中，每个 SOFA 模块的上下文中都会创建一个 PostProcessor 类的实例。你可以通过以下方式，修改指定的 <code>BeanPostProcessor</code> 或者<code>BeanFactoryPostProcessor</code> 的共享方式：</p>

<ul>
<li>* 在 PostProcessor 类上添加：</li>
</ul>

<p><code>com.alipay.sofa.boot.context.processor.UnshareSofaPostProcessor</code> 注解，PostProcessor 将不会被共享至 SOFA 模块中。</p>

<ul>
<li>* 在 PostProcessor 类上添加：</li>
</ul>

<p><code>com.alipay.sofa.boot.context.processor.SingletonSofaPostProcessor</code> 注解，SOFA Boot 框架会获取其在 Spring Boot 上下文中的 Singleton 实例注册至 SOFA 模块中，而不是注册 BeanDefinition，这将确保 PostProcessor 类在整个应用中保持单例。</p>

<ul>
<li>* 自定义：</li>
</ul>

<p><code>com.alipay.sofa.boot.context.processor.SofaPostProcessorShareFilter</code> 接口的实现类并将其注册至 Spring Boot 上下文中，通过 bean name 或 bean class 指定 PostProcessor 的共享方式。</p>

<ul>
<li><strong>添加感知 SOFA 模块刷新的扩展点</strong></li>
</ul>

<p>在开启模块化隔离特性时，你可以自定义 <code>com.alipay.sofa.boot.context.ContextRefreshInterceptor</code> 接口的实现类并将其注册至 Spring Boot 上下文中，当每个 SOFA 模块的 Spring 上下文开始刷新前以及刷新完成后，都会触发该接口的 <code>beforeRefresh</code> 以及 <code>afterRefresh</code> 方法。</p>

<p>你可以参考框架内置的：<code>com.alipay.sofa.runtime.context.ComponentContextRefreshInterceptor</code> 类，它用于在 SOFA 模块中的 Spring 上下文刷新成功后，将其注为 <code>SpringContextComponent</code>，在 SOFA 模块中的 Spring 上下文刷新失败后取消注册的 <code>ComponentInfo</code>。</p>

<ul>
<li><strong>支持注解参数的占位符替换</strong></li>
</ul>

<p>在一些情况下，我们希望自定义注解中的属性使用非固定值，通过 Spring 配置进行定制。SOFABoot 提供了：</p>

<p><code>com.alipay.sofa.boot.annotation.WrapperAnnotation</code> 工具类，用于快速实现上述功能。例如，你自定义了一个注解类 <code>DemoAnnotation</code>，并在某个类上使用了该注解：</p>

<pre><code class="language-java">@Retention(RetentionPolicy.RUNTIME)
@Target({ ElementType.FIELD, ElementType.METHOD, ElementType.PARAMETER })
public @interface DemoAnnotation {

    String key() default &quot;&quot;;
}   
</code></pre>

<pre><code class="language-java">@DemoAnnotation(key = &quot;${spring.annotation.config}&quot;)
public class TestClass {
}
</code></pre>

<p>通过以下方式获取的 key 字段数值将转换为你在 Spring Envrionment 中定义的 <code>spring.annotation.config</code> 配置值：</p>

<pre><code class="language-java">public String getAnnotationKey(Environment environment, DemoAnnotation demoAnnotation) {
    AnnotationWrapper&lt;DemoAnnotation&gt; serviceAnnotationWrapper = AnnotationWrapper.create(DemoAnnotation.class)
        .withEnvironment(environment)
        .withBinder(DefaultPlaceHolderBinder.INSTANCE);
    return serviceAnnotationWrapper.wrap(demoAnnotation).key();
}
</code></pre>

<h1 id="part-2-注意有重命名哦">Part.2 注意有重命名哦!</h1>

<p><strong>请先留意以下信息！</strong></p>

<ul>
<li>通过 actuator-sofa-boot-starter 引入的 SOFABoot 增强的 actuator 能力，通过配置项定制开启的 actuator。</li>
<li>依赖 health-sofa-boot-starter 与 startup-sofa-boot-starter 已被废弃，请使用 actuator-sofa-boot-starter 替换。</li>
<li>依赖 log-sofa-boot-starter 已被废弃，如果你引入了其他的 sofa boot starter，可以直接删除该依赖。如果你没有引入任何其他 sofa boot starter，使用 sofa-boot-starter 代替它。</li>
<li>依赖 rpc-sofa-boot-plugin、runtime-sofa-boot-plugin、tracer-sofa-boot-plugin 已被废弃，可使用 ark-sofa-boot-starter 代替它们。</li>
</ul>

<p>我们对下表中包名下的类进行了重命名，如果你使用了对应的类，则需要修改为新的包名：</p>

<table>
<thead>
<tr>
<th>原包名</th>
<th>新包名</th>
</tr>
</thead>

<tbody>
<tr>
<td>com.alipay.sofa.startup</td>
<td>com.alipay.sofa.boot.actuator.startup</td>
</tr>

<tr>
<td>com.alipay.sofa.healthcheck</td>
<td>com.alipay.sofa.boot.actuator.health</td>
</tr>

<tr>
<td>com.alipay.sofa.isle</td>
<td>com.alipay.sofa.boot.isle</td>
</tr>

<tr>
<td>com.alipay.sofa.tracer.boot</td>
<td>com.alipay.sofa.boot.tracer</td>
</tr>

<tr>
<td>com.alipay.sofa.service.api.component</td>
<td>com.alipay.sofa.runtime.ext</td>
</tr>
</tbody>
</table>

<p>SOFABoot 提供的以下 API 类进行了重命名，如果你使用了对应的类，则需要修改为新的类名：</p>

<table>
<thead>
<tr>
<th>原类名</th>
<th>新类名</th>
</tr>
</thead>

<tbody>
<tr>
<td>com.alipay.sofa.healthcheck.core.HealthChecker</td>
<td>com.alipay.sofa.boot.actuator.health.HealthChecker</td>
</tr>

<tr>
<td>com.alipay.sofa.healthcheck.startup.ReadinessCheckCallback</td>
<td>com.alipay.sofa.boot.actuator.health.ReadinessCheckCallback</td>
</tr>

<tr>
<td>com.alipay.sofa.runtime.spring.singleton.SingletonSofaPostProcessor</td>
<td>com.alipay.sofa.boot.context.processor.SingletonSofaPostProcessor</td>
</tr>

<tr>
<td>com.alipay.sofa.runtime.spring.share.UnshareSofaPostProcessor</td>
<td>com.alipay.sofa.boot.context.processor.UnshareSofaPostProcessor</td>
</tr>

<tr>
<td>com.alipay.sofa.runtime.factory.BeanLoadCostBeanFactory</td>
<td>com.alipay.sofa.boot.context.SofaDefaultListableBeanFactory</td>
</tr>
</tbody>
</table>

<h1 id="part-3-废弃特性">Part.3 废弃特性</h1>

<p><strong>再见啦，SOFAArk 1.0</strong></p>

<p>SOFABoot 4.0 不再支持 SOFAArk 1.0 模式，用于支持 Ark 测试的相关工具类已被移除，SOFAArk 2.0 模式下你不再需要这些类：</p>

<ul>
<li>com.alipay.sofa.test.annotation.DelegateToRunner</li>
<li>com.alipay.sofa.test.runner.SofaBootRunner</li>
<li>com.alipay.sofa.test.runner.SofaJUnit4Runner</li>
<li></li>
</ul>

<h1 id="part-4-请收下这份升级指南">Part.4 请收下这份升级指南🙆🏻‍♂️</h1>

<h2 id="before-you-start">Before You Start</h2>

<h3 id="升级-sofaboot-至-最新的-3-x-版本">升级 SOFABoot 至 最新的 3.x 版本</h3>

<p>在开始升级之前，请确保升级到最新可用的 3.x 版本。这将确保你正在针对该行的最新依赖项进行构建。</p>

<h3 id="检查依赖列表">检查依赖列表</h3>

<p>迁移到 SOFABoot 4.0 将升级许多依赖项 <em>（包括 Spring Boot 3.0 升级的依赖项）</em> ，请确认依赖项升级对你的应用的影响。请参考：</p>

<ul>
<li><p><a href="https://docs.spring.io/spring-boot/docs/2.7.x/reference/html/dependency-versions.html#appendix.dependency-versions">Spring Boot 2.7.x 依赖索引</a></p></li>

<li><p><a href="https://docs.spring.io/spring-boot/docs/3.0.x/reference/html/dependency-versions.html#appendix.dependency-versions">Spring Boot 3.0.x 依赖索引</a></p></li>
</ul>

<h3 id="检查已废弃的特性">检查已废弃的特性</h3>

<p>SOFABoot 3 以及 Spring Boot 2 中弃用的类、方法和属性，请确保在升级之前没有调用已弃用的功能。详情请参考上方「<strong>Part.3 废弃特性｜再见啦，SOFAArk 1.0</strong>」章节。</p>

<h3 id="检查系统配置">检查系统配置</h3>

<p>SOFABoot 4.0 依赖 Java 17 或者更高的版本，不再支持 Java 8。同时依赖 Spring Boot 3.0。</p>

<h2 id="升级至-sofa-boot-4-0">升级至 SOFA Boot 4.0</h2>

<h3 id="修改重命名的配置项">修改重命名的配置项</h3>

<p>请参考下方「<strong>Part.5 附录｜配置变更</strong>」章节以及文档 <a href="https://github.com/spring-projects/spring-boot/wiki/Spring-Boot-3.0-Configuration-Changelog">Spring Boot 2 -&gt; 3 配置变更</a></p>

<h3 id="修改重命名的类与依赖">修改重命名的类与依赖</h3>

<p>参考上方「<strong>Part.2 注意有重命名哦！</strong> 」章节</p>

<h3 id="升级-spring-boot-3-0">升级 Spring Boot 3.0</h3>

<p>参考文档： <a href="https://github.com/spring-projects/spring-boot/wiki/Spring-Boot-3.0-Migration-Guide">Spring Boot 3.0 升级文档</a></p>

<h1 id="part-5-附录-配置变更">Part.5 附录｜配置变更</h1>

<p><em>注：配置属性对比基于 3.16.3 与 4.0 版本。</em></p>

<ul>
<li><strong>在 4.0 版本中废弃的配置</strong></li>
</ul>

<table>
<thead>
<tr>
<th>key</th>
</tr>
</thead>

<tbody>
<tr>
<td>com.alipay.sofa.boot.serviceNameWithBeanId</td>
</tr>

<tr>
<td>com.alipay.sofa.boot.unregisterComponentWhenModuleInstallFailure</td>
</tr>

<tr>
<td>com.alipay.sofa.boot.startup.skipSofaBean</td>
</tr>
</tbody>
</table>

<ul>
<li><strong>在 4.0 版本中新增的配置</strong></li>
</ul>

<table>
<thead>
<tr>
<th>key</th>
<th>default value</th>
<th>description</th>
</tr>
</thead>

<tbody>
<tr>
<td>sofa.boot.isle.ignoreModules</td>
<td>无</td>
<td>指定忽略的 SOFA 模块列表</td>
</tr>

<tr>
<td>sofa.boot.isle.ignoreCalculateRequireModules</td>
<td>无</td>
<td>指定忽略 require module 属性的 SOFA 模块列表</td>
</tr>

<tr>
<td>sofa.boot.scenes</td>
<td>无</td>
<td>开启的场景配置列表</td>
</tr>

<tr>
<td>sofa.boot.startup.bufferSize</td>
<td>4096</td>
<td>框架内置的 BufferingApplicationStartup 的缓存大小</td>
</tr>

<tr>
<td>sofa.boot.threadPoolMonitor.disable</td>
<td>false</td>
<td>关闭 SOFA 线程池监控能力</td>
</tr>

<tr>
<td>sofa.boot.rpc.enableAutoPublish</td>
<td>false</td>
<td>支持应用启动时自动发布 rpc服务，不依赖 Actuator 模块</td>
</tr>
</tbody>
</table>

<ul>
<li><strong>在 4.0 版本中重命名的配置</strong></li>
</ul>

<p><strong>runtime properties</strong></p>

<table>
<thead>
<tr>
<th>origin key</th>
<th>replaced key</th>
</tr>
</thead>

<tbody>
<tr>
<td>com.alipay.sofa.boot.jvmFilterEnable</td>
<td>sofa.boot.runtime.jvmFilterEnable</td>
</tr>

<tr>
<td>com.alipay.sofa.boot.disableJvmFirst</td>
<td>sofa.boot.runtime.disableJvmFirst</td>
</tr>

<tr>
<td>com.alipay.sofa.boot.skipJvmReferenceHealthCheck</td>
<td>sofa.boot.runtime.skipJvmReferenceHealthCheck</td>
</tr>

<tr>
<td>com.alipay.sofa.boot.extensionFailureInsulating</td>
<td>sofa.boot.runtime.extensionFailureInsulating</td>
</tr>

<tr>
<td>com.alipay.sofa.boot.skipExtensionHealthCheck</td>
<td>sofa.boot.runtime.skipExtensionHealthCheck</td>
</tr>

<tr>
<td>com.alipay.sofa.boot.serviceInterfaceTypeCheck</td>
<td>sofa.boot.runtime.serviceInterfaceTypeCheck</td>
</tr>

<tr>
<td>com.alipay.sofa.boot.skipAllComponentShutdown</td>
<td>sofa.boot.runtime.skipAllComponentShutdown</td>
</tr>

<tr>
<td>com.alipay.sofa.boot.skipCommonComponentShutdown</td>
<td>sofa.boot.runtime.skipCommonComponentShutdown</td>
</tr>

<tr>
<td>com.alipay.sofa.boot.asyncInitBeanCoreSize</td>
<td>sofa.boot.runtime.asyncInitExecutorCoreSize</td>
</tr>

<tr>
<td>com.alipay.sofa.boot.asyncInitBeanMaxSize</td>
<td>sofa.boot.runtime.asyncInitExecutorMaxSize</td>
</tr>

<tr>
<td>com.alipay.sofa.boot.dynamicJvmServiceCacheEnable</td>
<td>sofa.boot.ark.jvmServiceCache</td>
</tr>

<tr>
<td>com.alipay.sofa.boot.skipJvmSerialize</td>
<td>sofa.boot.ark.jvmInvokeSerialize</td>
</tr>

<tr>
<td>com.alipay.sofa.boot.beanLoadCost</td>
<td>sofa.boot.startup.costThreshold</td>
</tr>
</tbody>
</table>

<p><strong>isle properties</strong></p>

<table>
<thead>
<tr>
<th>origin key</th>
<th>replaced key</th>
</tr>
</thead>

<tbody>
<tr>
<td>com.alipay.sofa.boot.activeProfiles</td>
<td>sofa.boot.isle.activeProfiles</td>
</tr>

<tr>
<td>com.alipay.sofa.boot.allowBeanDefinitionOverriding</td>
<td>sofa.boot.isle.allowBeanDefinitionOverriding</td>
</tr>

<tr>
<td>com.alipay.sofa.boot.moduleStartUpParallel</td>
<td>sofa.boot.isle.moduleStartUpParallel</td>
</tr>

<tr>
<td>com.alipay.sofa.boot.publishEventToParent</td>
<td>sofa.boot.isle.publishEventToParent</td>
</tr>

<tr>
<td>com.alipay.sofa.boot.enableIsle</td>
<td>sofa.boot.isle.enabled</td>
</tr>

<tr>
<td>com.alipay.sofa.boot.allowModuleOverriding</td>
<td>sofa.boot.isle.allowModuleOverriding</td>
</tr>

<tr>
<td>com.alipay.sofa.boot.ignoreModuleInstallFailure</td>
<td>sofa.boot.isle.ignoreModuleInstallFailure</td>
</tr>

<tr>
<td>com.alipay.sofa.boot.parallelRefreshCoreCountFactor</td>
<td>sofa.boot.isle.parallelRefreshPoolSizeFactor</td>
</tr>

<tr>
<td>com.alipay.sofa.boot.parallelRefreshTimeout</td>
<td>sofa.boot.isle.parallelRefreshTimeout</td>
</tr>

<tr>
<td>com.alipay.sofa.boot.parallelRefreshCheckPeriod</td>
<td>sofa.boot.isle.parallelRefreshCheckPeriod</td>
</tr>

<tr>
<td>com.alipay.sofa.boot.share.parent.context.post.processor.enabled</td>
<td>sofa.boot.isle.shareParentPostProcessor</td>
</tr>
</tbody>
</table>

<p><strong>actuator properties</strong></p>

<table>
<thead>
<tr>
<th>origin key</th>
<th>replaced key</th>
</tr>
</thead>

<tbody>
<tr>
<td>com.alipay.sofa.boot.manualReadinessCallback</td>
<td>sofa.boot.actuator.health.manualReadinessCallback</td>
</tr>

<tr>
<td>com.alipay.sofa.healthcheck.skip.all</td>
<td>sofa.boot.actuator.health.skipAll</td>
</tr>

<tr>
<td>com.alipay.sofa.healthcheck.skip.component</td>
<td>sofa.boot.actuator.health.skipHealthChecker</td>
</tr>

<tr>
<td>com.alipay.sofa.healthcheck.skip.indicator</td>
<td>sofa.boot.actuator.health.skipHealthIndicator</td>
</tr>

<tr>
<td>com.alipay.sofa.healthcheck.component.check.retry.count</td>
<td>sofa.boot.actuator.health.healthCheckerConfig.components.retryCount</td>
</tr>

<tr>
<td>com.alipay.sofa.healthcheck.component.check.retry.interval</td>
<td>sofa.boot.actuator.health.healthCheckerConfig.components.retryTimeInterval</td>
</tr>

<tr>
<td>com.alipay.sofa.healthcheck.component.check.strict.enabled</td>
<td>sofa.boot.actuator.health.healthCheckerConfig.components.strictCheck</td>
</tr>

<tr>
<td>com.alipay.sofa.healthcheck.component.timeout</td>
<td>sofa.boot.actuator.health.healthCheckerConfig.components.timeout</td>
</tr>

<tr>
<td>com.alipay.sofa.healthcheck.module.check.retry.count</td>
<td>sofa.boot.actuator.health.healthCheckerConfig.modules.retryCount</td>
</tr>

<tr>
<td>com.alipay.sofa.healthcheck.module.check.retry.interval</td>
<td>sofa.boot.actuator.health.healthCheckerConfig.modules.retryTimeInterval</td>
</tr>

<tr>
<td>com.alipay.sofa.healthcheck.module.check.strict.enabled</td>
<td>sofa.boot.actuator.health.healthCheckerConfig.modules.strictCheck</td>
</tr>

<tr>
<td>com.alipay.sofa.healthcheck.module.timeout</td>
<td>sofa.boot.actuator.health.healthCheckerConfig.modules.timeout</td>
</tr>

<tr>
<td>com.alipay.sofa.healthcheck.default.timeout</td>
<td>sofa.boot.actuator.health.globalHealthCheckerTimeout</td>
</tr>

<tr>
<td>com.alipay.sofa.healthcheck.indicator.timeout</td>
<td>sofa.boot.actuator.health.globalHealthIndicatorTimeout</td>
</tr>

<tr>
<td>com.alipay.sofa.boot.healthCheckInsulator</td>
<td>sofa.boot.actuator.health.insulator</td>
</tr>

<tr>
<td>com.alipay.sofa.boot.healthCheckParallelEnable</td>
<td>sofa.boot.actuator.health.parallelCheck</td>
</tr>

<tr>
<td>com.alipay.sofa.boot.healthCheckParallelTimeout</td>
<td>sofa.boot.actuator.health.parallelCheckTimeout</td>
</tr>

<tr>
<td>com.alipay.sofa.boot.excludedIndicators</td>
<td>sofa.boot.actuator.health.excludedIndicators</td>
</tr>
</tbody>
</table>

<p><strong>tracer properties</strong></p>

<table>
<thead>
<tr>
<th>origin key</th>
<th>replaced key</th>
</tr>
</thead>

<tbody>
<tr>
<td>com.alipay.sofa.tracer.datasource.enable</td>
<td>sofa.boot.tracer.datasource.enabled</td>
</tr>

<tr>
<td>com.alipay.sofa.tracer.feign.enabled</td>
<td>sofa.boot.tracer.feign.enabled</td>
</tr>

<tr>
<td>com.alipay.sofa.tracer.springmvc.enable</td>
<td>sofa.boot.tracer.springmvc.enabled</td>
</tr>

<tr>
<td>com.alipay.sofa.tracer.springmvc.filterOrder</td>
<td>sofa.boot.tracer.springmvc.filterOrder</td>
</tr>

<tr>
<td>com.alipay.tracer.kafka.enabled</td>
<td>sofa.boot.tracer.kafka.enabled</td>
</tr>

<tr>
<td>com.alipay.tracer.mongodb.enabled</td>
<td>sofa.boot.tracer.mongodb.enabled</td>
</tr>

<tr>
<td>com.alipay.sofa.tracer.rabbitmq.enable</td>
<td>sofa.boot.tracer.rabbitmq.enabled</td>
</tr>

<tr>
<td>com.alipay.sofa.tracer.redis.enabled</td>
<td>sofa.boot.tracer.redis.enabled</td>
</tr>

<tr>
<td>com.alipay.sofa.tracer.resttemplate</td>
<td>sofa.boot.tracer.resttemplate.enabled</td>
</tr>

<tr>
<td>com.alipay.sofa.tracer.rocketmq</td>
<td>sofa.boot.tracer.rocketmq.enabled</td>
</tr>

<tr>
<td>com.alipay.sofa.tracer.message</td>
<td>sofa.boot.tracer.springmessage.enabled</td>
</tr>

<tr>
<td>com.alipay.sofa.tracer.flexible</td>
<td>sofa.boot.tracer.flexible.enabled</td>
</tr>

<tr>
<td>com.alipay.sofa.tracer.zipkin.enabled</td>
<td>sofa.boot.tracer.zipkin.enabled</td>
</tr>

<tr>
<td>com.alipay.sofa.tracer.zipkin.baseUrl</td>
<td>sofa.boot.tracer.zipkin.baseUrl</td>
</tr>

<tr>
<td>com.alipay.sofa.tracer.zipkin.gzipped</td>
<td>sofa.boot.tracer.zipkin.gzipped</td>
</tr>

<tr>
<td>com.alipay.sofa.tracer.disableDigestLog</td>
<td>sofa.boot.tracer.disableDigestLog</td>
</tr>

<tr>
<td>com.alipay.sofa.tracer.disableConfiguration</td>
<td>sofa.boot.tracer.disableConfiguration</td>
</tr>

<tr>
<td>com.alipay.sofa.tracer.tracerGlobalRollingPolicy</td>
<td>sofa.boot.tracer.tracerGlobalRollingPolicy</td>
</tr>

<tr>
<td>com.alipay.sofa.tracer.tracerGlobalLogReserveDay</td>
<td>sofa.boot.tracer.tracerGlobalLogReserveDay</td>
</tr>

<tr>
<td>com.alipay.sofa.tracer.statLogInterval</td>
<td>sofa.boot.tracer.statLogInterval</td>
</tr>

<tr>
<td>com.alipay.sofa.tracer.baggageMaxLength</td>
<td>sofa.boot.tracer.baggageMaxLength</td>
</tr>

<tr>
<td>com.alipay.sofa.tracer.samplerName</td>
<td>sofa.boot.tracer.samplerName</td>
</tr>

<tr>
<td>com.alipay.sofa.tracer.samplerPercentage</td>
<td>sofa.boot.tracer.samplerPercentage</td>
</tr>

<tr>
<td>com.alipay.sofa.tracer.samplerCustomRuleClassName</td>
<td>sofa.boot.tracer.samplerCustomRuleClassName</td>
</tr>

<tr>
<td>com.alipay.sofa.tracer.reporterName</td>
<td>sofa.boot.tracer.reporterName</td>
</tr>

<tr>
<td>com.alipay.sofa.tracer.jsonOutput</td>
<td>sofa.boot.tracer.jsonOutput</td>
</tr>
</tbody>
</table>

<p><strong>rpc properties</strong></p>

<table>
<thead>
<tr>
<th>origin key</th>
<th>replaced key</th>
</tr>
</thead>

<tbody>
<tr>
<td>com.alipay.sofa.rpc.aftRegulationEffective</td>
<td>sofa.boot.rpc.aftRegulationEffective</td>
</tr>

<tr>
<td>com.alipay.sofa.rpc.aftDegradeEffective</td>
<td>sofa.boot.rpc.aftDegradeEffective</td>
</tr>

<tr>
<td>com.alipay.sofa.rpc.aftTimeWindow</td>
<td>sofa.boot.rpc.aftTimeWindow</td>
</tr>

<tr>
<td>com.alipay.sofa.rpc.aftLeastWindowCount</td>
<td>sofa.boot.rpc.aftLeastWindowCount</td>
</tr>

<tr>
<td>com.alipay.sofa.rpc.aftLeastWindowExceptionRateMultiple</td>
<td>sofa.boot.rpc.aftLeastWindowExceptionRateMultiple</td>
</tr>

<tr>
<td>com.alipay.sofa.rpc.aftWeightDegradeRate</td>
<td>sofa.boot.rpc.aftWeightDegradeRate</td>
</tr>

<tr>
<td>com.alipay.sofa.rpc.aftWeightRecoverRate</td>
<td>sofa.boot.rpc.aftWeightRecoverRate</td>
</tr>

<tr>
<td>com.alipay.sofa.rpc.aftDegradeLeastWeight</td>
<td>sofa.boot.rpc.aftDegradeLeastWeight</td>
</tr>

<tr>
<td>com.alipay.sofa.rpc.aftDegradeMaxIpCount</td>
<td>sofa.boot.rpc.aftDegradeMaxIpCount</td>
</tr>

<tr>
<td>com.alipay.sofa.rpc.boltPort</td>
<td>sofa.boot.rpc.boltPort</td>
</tr>

<tr>
<td>com.alipay.sofa.rpc.boltThreadPoolCoreSize</td>
<td>sofa.boot.rpc.boltThreadPoolCoreSize</td>
</tr>

<tr>
<td>com.alipay.sofa.rpc.boltThreadPoolMaxSize</td>
<td>sofa.boot.rpc.boltThreadPoolMaxSize</td>
</tr>

<tr>
<td>com.alipay.sofa.rpc.boltThreadPoolQueueSize</td>
<td>sofa.boot.rpc.boltThreadPoolQueueSize</td>
</tr>

<tr>
<td>com.alipay.sofa.rpc.boltAcceptsSize</td>
<td>sofa.boot.rpc.boltAcceptsSize</td>
</tr>

<tr>
<td>com.alipay.sofa.rpc.boltProcessInIoThread</td>
<td>sofa.boot.rpc.boltProcessInIoThread</td>
</tr>

<tr>
<td>com.alipay.sofa.rpc.enableSwagger</td>
<td>sofa.boot.rpc.enableSwagger</td>
</tr>

<tr>
<td>com.alipay.sofa.rpc.mockUrl</td>
<td>sofa.boot.rpc.mockUrl</td>
</tr>

<tr>
<td>com.alipay.sofa.rpc.h2cPort</td>
<td>sofa.boot.rpc.h2cPort</td>
</tr>

<tr>
<td>com.alipay.sofa.rpc.h2cThreadPoolCoreSize</td>
<td>sofa.boot.rpc.h2cThreadPoolCoreSize</td>
</tr>

<tr>
<td>com.alipay.sofa.rpc.h2cThreadPoolMaxSize</td>
<td>sofa.boot.rpc.h2cThreadPoolMaxSize</td>
</tr>

<tr>
<td>com.alipay.sofa.rpc.h2cThreadPoolQueueSize</td>
<td>sofa.boot.rpc.h2cThreadPoolQueueSize</td>
</tr>

<tr>
<td>com.alipay.sofa.rpc.h2cAcceptsSize</td>
<td>sofa.boot.rpc.h2cAcceptsSize</td>
</tr>

<tr>
<td>com.alipay.sofa.rpc.restHostname</td>
<td>sofa.boot.rpc.restHostname</td>
</tr>

<tr>
<td>com.alipay.sofa.rpc.restPort</td>
<td>sofa.boot.rpc.restPort</td>
</tr>

<tr>
<td>com.alipay.sofa.rpc.restIoThreadSize</td>
<td>sofa.boot.rpc.restIoThreadSize</td>
</tr>

<tr>
<td>com.alipay.sofa.rpc.restContextPath</td>
<td>sofa.boot.rpc.restContextPath</td>
</tr>

<tr>
<td>com.alipay.sofa.rpc.restAllowedOrigins</td>
<td>sofa.boot.rpc.restAllowedOrigins</td>
</tr>

<tr>
<td>com.alipay.sofa.rpc.restThreadPoolCoreSize</td>
<td>sofa.boot.rpc.restThreadPoolCoreSize</td>
</tr>

<tr>
<td>com.alipay.sofa.rpc.restThreadPoolMaxSize</td>
<td>sofa.boot.rpc.restThreadPoolMaxSize</td>
</tr>

<tr>
<td>com.alipay.sofa.rpc.restMaxRequestSize</td>
<td>sofa.boot.rpc.restMaxRequestSize</td>
</tr>

<tr>
<td>com.alipay.sofa.rpc.restTelnet</td>
<td>sofa.boot.rpc.restTelnet</td>
</tr>

<tr>
<td>com.alipay.sofa.rpc.restDaemon</td>
<td>sofa.boot.rpc.restDaemon</td>
</tr>

<tr>
<td>com.alipay.sofa.rpc.restSwagger</td>
<td>sofa.boot.rpc.restSwagger</td>
</tr>

<tr>
<td>com.alipay.sofa.rpc.dubboPort</td>
<td>sofa.boot.rpc.dubboPort</td>
</tr>

<tr>
<td>com.alipay.sofa.rpc.dubboIoThreadSize</td>
<td>sofa.boot.rpc.dubboIoThreadSize</td>
</tr>

<tr>
<td>com.alipay.sofa.rpc.dubboThreadPoolCoreSize</td>
<td>sofa.boot.rpc.dubboThreadPoolCoreSize</td>
</tr>

<tr>
<td>com.alipay.sofa.rpc.dubboThreadPoolMaxSize</td>
<td>sofa.boot.rpc.dubboThreadPoolMaxSize</td>
</tr>

<tr>
<td>com.alipay.sofa.rpc.dubboThreadPoolQueueSize</td>
<td>sofa.boot.rpc.dubboThreadPoolQueueSize</td>
</tr>

<tr>
<td>com.alipay.sofa.rpc.dubboAcceptsSize</td>
<td>sofa.boot.rpc.dubboAcceptsSize</td>
</tr>

<tr>
<td>com.alipay.sofa.rpc.httpPort</td>
<td>sofa.boot.rpc.httpPort</td>
</tr>

<tr>
<td>com.alipay.sofa.rpc.httpThreadPoolCoreSize</td>
<td>sofa.boot.rpc.httpThreadPoolCoreSize</td>
</tr>

<tr>
<td>com.alipay.sofa.rpc.httpThreadPoolMaxSize</td>
<td>sofa.boot.rpc.httpThreadPoolMaxSize</td>
</tr>

<tr>
<td>com.alipay.sofa.rpc.httpThreadPoolQueueSize</td>
<td>sofa.boot.rpc.httpThreadPoolQueueSize</td>
</tr>

<tr>
<td>com.alipay.sofa.rpc.httpAcceptsSize</td>
<td>sofa.boot.rpc.httpAcceptsSize</td>
</tr>

<tr>
<td>com.alipay.sofa.rpc.triplePort</td>
<td>sofa.boot.rpc.triplePort</td>
</tr>

<tr>
<td>com.alipay.sofa.rpc.tripleThreadPoolCoreSize</td>
<td>sofa.boot.rpc.tripleThreadPoolCoreSize</td>
</tr>

<tr>
<td>com.alipay.sofa.rpc.tripleThreadPoolMaxSize</td>
<td>sofa.boot.rpc.tripleThreadPoolMaxSize</td>
</tr>

<tr>
<td>com.alipay.sofa.rpc.tripleThreadPoolQueueSize</td>
<td>sofa.boot.rpc.tripleThreadPoolQueueSize</td>
</tr>

<tr>
<td>com.alipay.sofa.rpc.tripleAcceptsSize</td>
<td>sofa.boot.rpc.tripleAcceptsSize</td>
</tr>

<tr>
<td>com.alipay.sofa.rpc.registryAddress</td>
<td>sofa.boot.rpc.registryAddress</td>
</tr>

<tr>
<td>com.alipay.sofa.rpc.virtualHost</td>
<td>sofa.boot.rpc.virtualHost</td>
</tr>

<tr>
<td>com.alipay.sofa.rpc.virtualPort</td>
<td>sofa.boot.rpc.virtualPort</td>
</tr>

<tr>
<td>com.alipay.sofa.rpc.enabledIpRange</td>
<td>sofa.boot.rpc.enabledIpRange</td>
</tr>

<tr>
<td>com.alipay.sofa.rpc.bindNetworkInterface</td>
<td>sofa.boot.rpc.bindNetworkInterface</td>
</tr>

<tr>
<td>com.alipay.sofa.rpc.boundHost</td>
<td>sofa.boot.rpc.boundHost</td>
</tr>

<tr>
<td>com.alipay.sofa.rpc.lookoutCollectDisable</td>
<td>sofa.boot.rpc.lookoutCollectDisable</td>
</tr>

<tr>
<td>com.alipay.sofa.rpc.registries</td>
<td>sofa.boot.rpc.registries</td>
</tr>

<tr>
<td>com.alipay.sofa.rpc.enableMesh</td>
<td>sofa.boot.rpc.enableMesh</td>
</tr>

<tr>
<td>com.alipay.sofa.rpc.consumerRepeatedReferenceLimit</td>
<td>sofa.boot.rpc.consumerRepeatedReferenceLimit</td>
</tr>

<tr>
<td>com.alipay.sofa.rpc.hystrixEnable</td>
<td>sofa.boot.rpc.hystrixEnable</td>
</tr>

<tr>
<td>com.alipay.sofa.rpc.defaultTracer</td>
<td>sofa.boot.rpc.defaultTracer</td>
</tr>

<tr>
<td>com.alipay.sofa.rpc.dynamicConfig</td>
<td>sofa.boot.rpc.dynamicConfig</td>
</tr>

<tr>
<td>sofa.rpc.registry.disablePub</td>
<td>sofa.boot.rpc.registry.disablePub</td>
</tr>

<tr>
<td>sofa.rpc.registry.defaultRegistry</td>
<td>sofa.boot.rpc.registry.defaultRegistry</td>
</tr>
</tbody>
</table>

<p><strong>了解更多&hellip;</strong></p>

<p><strong>SOFABoot Star 一下✨：</strong><br />
<a href="https://github.com/sofastack/sofa-boot">https://github.com/sofastack/sofa-boot</a></p>

</article>

<script>
  const article = document.querySelector('article.typo')
  
  const imgElements = article.querySelectorAll('img');
  
  imgElements.forEach(img => {
    const src = img.getAttribute('src');
    
    
      
    
    img.setAttribute('referrerpolicy', 'no-referrer');
  });
</script>


		<div class="-show-mobile">
			

<nav class="ss-pagination-next">
	<a class="link-prev" href="https://sofastack.github.io/sofastack.tech/blog/seata-dtxdistributed-transaction-financial-scenario-case-introduction/">
		<span class="text">上一篇: </span>
		<span class="text">Seata-DTX｜分布式事务金融场景案例介绍</span>
	</a>
	<a class="link-next" href="https://sofastack.github.io/sofastack.tech/blog/moe-series6envoy-go-extensions-concurrency-security/">
		<span class="text">下一篇: </span>
		<span class="text">MoE 系列（六）｜ Envoy Go 扩展之并发安全</span>
	</a>
</nav>

		</div>
	</main>

	<aside class="ss-layout-aside">
		
		


<div class="ss-card">
	<h2 class="card-title">
		相关推荐
	</h2>
	
	<ul class="ss-aside-related">
		
			<li><a href="/sofastack.tech/blog/nydus-container-image-acceleration-practices-on-the-yosemite-platform/">Nydus 在约苗平台的容器镜像加速实践</a></li>
		
	</ul>
	
</div>

		<div class="ss-aside-tags ss-card">
	<h2 class="card-title">
		标签
		<span class="card-extra"></span>
	</h2>
	<ul class="tag-list">
		
			<li class="tag"><a href="/sofastack.tech/tags/1024/">1024</a></li>
		
			<li class="tag"><a href="/sofastack.tech/tags/api-gateway/">API Gateway </a></li>
		
			<li class="tag"><a href="/sofastack.tech/tags/cafedeployment/">CafeDeployment</a></li>
		
			<li class="tag"><a href="/sofastack.tech/tags/cloud-native/">Cloud Native</a></li>
		
			<li class="tag"><a href="/sofastack.tech/tags/cncf/">CNCF</a></li>
		
			<li class="tag"><a href="/sofastack.tech/tags/db-mesh/">DB Mesh</a></li>
		
			<li class="tag"><a href="/sofastack.tech/tags/dragonfly/">Dragonfly</a></li>
		
			<li class="tag"><a href="/sofastack.tech/tags/elasticdl/">ElasticDL</a></li>
		
			<li class="tag"><a href="/sofastack.tech/tags/http/3/">HTTP/3</a></li>
		
			<li class="tag"><a href="/sofastack.tech/tags/http/quic/">HTTP/QUIC</a></li>
		
			<li class="tag"><a href="/sofastack.tech/tags/kata-container/">Kata Container</a></li>
		
			<li class="tag"><a href="/sofastack.tech/tags/kata-containers/">Kata Containers</a></li>
		
			<li class="tag"><a href="/sofastack.tech/tags/knative/">Knative</a></li>
		
			<li class="tag"><a href="/sofastack.tech/tags/kubecon/">KubeCon</a></li>
		
			<li class="tag"><a href="/sofastack.tech/tags/kubernetes/">Kubernetes</a></li>
		
			<li class="tag"><a href="/sofastack.tech/tags/meetup/">Meetup</a></li>
		
			<li class="tag"><a href="/sofastack.tech/tags/mosn/">MOSN</a></li>
		
			<li class="tag"><a href="/sofastack.tech/tags/nydus/">Nydus</a></li>
		
			<li class="tag"><a href="/sofastack.tech/tags/occlum/">Occlum</a></li>
		
			<li class="tag"><a href="/sofastack.tech/tags/rpc-%E6%A1%86%E6%9E%B6%E8%AE%BE%E8%AE%A1%E7%9A%84%E8%80%83%E5%92%8C%E9%87%8F/">RPC 框架设计的考和量</a></li>
		
			<li class="tag"><a href="/sofastack.tech/tags/seata/">seata</a></li>
		
			<li class="tag"><a href="/sofastack.tech/tags/serverless/">Serverless</a></li>
		
			<li class="tag"><a href="/sofastack.tech/tags/serverlesstask/">ServerlessTask</a></li>
		
			<li class="tag"><a href="/sofastack.tech/tags/service-mesh/">Service Mesh</a></li>
		
			<li class="tag"><a href="/sofastack.tech/tags/service-mesh-meetup/">Service Mesh Meetup</a></li>
		
			<li class="tag"><a href="/sofastack.tech/tags/service-mesh-virtual-meetup/">Service Mesh Virtual Meetup</a></li>
		
			<li class="tag"><a href="/sofastack.tech/tags/service-mesh-webinar/">Service Mesh Webinar</a></li>
		
			<li class="tag"><a href="/sofastack.tech/tags/service-mesh-%E8%90%BD%E5%9C%B0%E5%AE%9E%E8%B7%B5/">Service Mesh 落地实践</a></li>
		
			<li class="tag"><a href="/sofastack.tech/tags/sidecar-%E5%AE%B9%E5%99%A8/">Sidecar 容器</a></li>
		
			<li class="tag"><a href="/sofastack.tech/tags/sofa/">SOFA</a></li>
		
			<li class="tag"><a href="/sofastack.tech/tags/sofa-weekly/">SOFA Weekly</a></li>
		
			<li class="tag"><a href="/sofastack.tech/tags/sofaacts/">SOFAActs</a></li>
		
			<li class="tag"><a href="/sofastack.tech/tags/sofaark/">SOFAArk</a></li>
		
			<li class="tag"><a href="/sofastack.tech/tags/sofaarklab/">SOFAArkLab</a></li>
		
			<li class="tag"><a href="/sofastack.tech/tags/sofabolt/">SOFABolt</a></li>
		
			<li class="tag"><a href="/sofastack.tech/tags/sofaboot/">SOFABoot</a></li>
		
			<li class="tag"><a href="/sofastack.tech/tags/sofachannel/">SOFAChannel</a></li>
		
			<li class="tag"><a href="/sofastack.tech/tags/sofadashboard/">SOFADashboard</a></li>
		
			<li class="tag"><a href="/sofastack.tech/tags/sofaenclave/">SOFAEnclave</a></li>
		
			<li class="tag"><a href="/sofastack.tech/tags/sofajraft/">SOFAJRaft</a></li>
		
			<li class="tag"><a href="/sofastack.tech/tags/sofajraft-%E7%89%B9%E6%80%A7%E8%A7%A3%E6%9E%90/">SOFAJRaft 特性解析</a></li>
		
			<li class="tag"><a href="/sofastack.tech/tags/sofalab/">SOFALab</a></li>
		
			<li class="tag"><a href="/sofastack.tech/tags/sofalookout/">SOFALookout</a></li>
		
			<li class="tag"><a href="/sofastack.tech/tags/sofameetup/">SOFAMeetup</a></li>
		
			<li class="tag"><a href="/sofastack.tech/tags/sofamesh/">SOFAMesh</a></li>
		
			<li class="tag"><a href="/sofastack.tech/tags/sofaregistry/">SOFARegistry</a></li>
		
			<li class="tag"><a href="/sofastack.tech/tags/sofarpc/">SOFARPC</a></li>
		
			<li class="tag"><a href="/sofastack.tech/tags/sofastack/">SOFAStack</a></li>
		
			<li class="tag"><a href="/sofastack.tech/tags/sofastack-%E5%BC%80%E6%BA%90%E4%B9%8B%E5%A4%8F/">SOFAStack 开源之夏</a></li>
		
			<li class="tag"><a href="/sofastack.tech/tags/sofastak/">SOFAStak</a></li>
		
			<li class="tag"><a href="/sofastack.tech/tags/sofatalk/">SOFATalk</a></li>
		
			<li class="tag"><a href="/sofastack.tech/tags/sofatracer/">SOFATracer</a></li>
		
			<li class="tag"><a href="/sofastack.tech/tags/springboot/">SpringBoot</a></li>
		
			<li class="tag"><a href="/sofastack.tech/tags/sqlflow/">SQLFlow</a></li>
		
			<li class="tag"><a href="/sofastack.tech/tags/summer-2021/">Summer 2021</a></li>
		
			<li class="tag"><a href="/sofastack.tech/tags/workshop/">Workshop</a></li>
		
			<li class="tag"><a href="/sofastack.tech/tags/zsearch/">ZSearch</a></li>
		
			<li class="tag"><a href="/sofastack.tech/tags/%E4%BA%91%E5%8E%9F%E7%94%9F/">云原生</a></li>
		
			<li class="tag"><a href="/sofastack.tech/tags/%E4%BB%BB%E5%8A%A1%E8%B0%83%E5%BA%A6/">任务调度</a></li>
		
			<li class="tag"><a href="/sofastack.tech/tags/%E4%BD%A0%E7%9A%84%E5%BC%80%E6%BA%90%E5%85%A5%E9%97%A8%E6%8C%87%E5%8D%97/">你的开源入门指南</a></li>
		
			<li class="tag"><a href="/sofastack.tech/tags/%E5%88%86%E5%B8%83%E5%BC%8F/">分布式</a></li>
		
			<li class="tag"><a href="/sofastack.tech/tags/%E5%88%86%E5%B8%83%E5%BC%8F%E4%BA%8B%E5%8A%A1/">分布式事务</a></li>
		
			<li class="tag"><a href="/sofastack.tech/tags/%E5%88%86%E5%B8%83%E5%BC%8F%E6%9E%B6%E6%9E%84/">分布式架构</a></li>
		
			<li class="tag"><a href="/sofastack.tech/tags/%E5%89%96%E6%9E%90-sofaark-%E6%BA%90%E7%A0%81/">剖析 | SOFAArk 源码 </a></li>
		
			<li class="tag"><a href="/sofastack.tech/tags/%E5%89%96%E6%9E%90-sofabolt-%E6%A1%86%E6%9E%B6/">剖析 | SOFABolt 框架</a></li>
		
			<li class="tag"><a href="/sofastack.tech/tags/%E5%89%96%E6%9E%90-sofaboot-%E6%A1%86%E6%9E%B6/">剖析 | SOFABoot 框架</a></li>
		
			<li class="tag"><a href="/sofastack.tech/tags/%E5%89%96%E6%9E%90-sofajraft-%E5%AE%9E%E7%8E%B0%E5%8E%9F%E7%90%86/">剖析 | SOFAJRaft 实现原理</a></li>
		
			<li class="tag"><a href="/sofastack.tech/tags/%E5%89%96%E6%9E%90-sofaregistry-%E6%A1%86%E6%9E%B6/">剖析 | SOFARegistry 框架</a></li>
		
			<li class="tag"><a href="/sofastack.tech/tags/%E5%89%96%E6%9E%90-sofarpc-%E6%A1%86%E6%9E%B6/">剖析 | SOFARPC 框架</a></li>
		
			<li class="tag"><a href="/sofastack.tech/tags/%E5%89%96%E6%9E%90-sofatracer-%E6%A1%86%E6%9E%B6/">剖析 | SOFATracer 框架</a></li>
		
			<li class="tag"><a href="/sofastack.tech/tags/%E5%AE%9E%E8%B7%B5/">实践</a></li>
		
			<li class="tag"><a href="/sofastack.tech/tags/%E5%BC%80%E6%BA%90/">开源</a></li>
		
			<li class="tag"><a href="/sofastack.tech/tags/%E5%BC%80%E6%BA%90%E4%B9%8B%E5%A4%8F/">开源之夏</a></li>
		
			<li class="tag"><a href="/sofastack.tech/tags/%E5%BC%80%E6%BA%90%E4%BA%94%E5%91%A8%E5%B9%B4/">开源五周年</a></li>
		
			<li class="tag"><a href="/sofastack.tech/tags/%E5%BC%80%E6%BA%90%E5%85%AD%E5%91%A8%E5%B9%B4/">开源六周年</a></li>
		
			<li class="tag"><a href="/sofastack.tech/tags/%E5%BC%80%E6%BA%90%E5%AE%B9%E5%99%A8%E9%95%9C%E5%83%8F%E5%8A%A0%E9%80%9F%E6%9C%8D%E5%8A%A1%E7%9A%84%E6%BC%94%E8%BF%9B%E4%B8%8E%E6%9C%AA%E6%9D%A5/">开源容器镜像加速服务的演进与未来</a></li>
		
			<li class="tag"><a href="/sofastack.tech/tags/%E5%BC%B9%E6%80%A7%E4%BC%B8%E7%BC%A9/">弹性伸缩</a></li>
		
			<li class="tag"><a href="/sofastack.tech/tags/%E5%BE%AE%E6%9C%8D%E5%8A%A1/">微服务</a></li>
		
			<li class="tag"><a href="/sofastack.tech/tags/%E6%96%87%E4%BB%B6%E5%92%8C%E9%95%9C%E5%83%8F%E5%8A%A0%E9%80%9F%E7%B3%BB%E7%BB%9F/">文件和镜像加速系统</a></li>
		
			<li class="tag"><a href="/sofastack.tech/tags/%E6%99%BA%E8%83%BD%E7%9B%91%E6%8E%A7/">智能监控</a></li>
		
			<li class="tag"><a href="/sofastack.tech/tags/%E6%99%BA%E8%83%BD%E8%BF%90%E7%BB%B4/">智能运维</a></li>
		
			<li class="tag"><a href="/sofastack.tech/tags/%E6%BA%90%E5%88%9B%E4%BC%9A/">源创会</a></li>
		
			<li class="tag"><a href="/sofastack.tech/tags/%E6%BA%90%E7%A0%81%E8%A7%A3%E6%9E%90/">源码解析</a></li>
		
			<li class="tag"><a href="/sofastack.tech/tags/%E7%B1%BB%E9%9A%94%E7%A6%BB%E6%A1%86%E6%9E%B6/">类隔离框架</a></li>
		
			<li class="tag"><a href="/sofastack.tech/tags/%E9%95%9C%E5%83%8F/">镜像</a></li>
		
	</ul>
</div>
	</aside>
</div>



	


<footer class="ss-footer">
	<div class="container">
		<div class="links">
			
				<div class="cate">
					<h2 class="cate-title">资源</h2>
					
						<a class="link" href="https://github.com/sofastack">Github</a>
					
						<a class="link" href="https://gitee.com/sofastack/">Gitee</a>
					
						<a class="link" href="https://github.com/sofastack-guides">示例</a>
					
				</div>
			
				<div class="cate">
					<h2 class="cate-title">社交媒体</h2>
					
						<a class="link" href="https://zhuanlan.zhihu.com/sofastack">知乎专栏</a>
					
						<a class="link" href="https://weibo.com/sofastack">新浪微博</a>
					
						<a class="link" href="https://twitter.com/sofastack_io">Twitter</a>
					
				</div>
			
				<div class="cate">
					<h2 class="cate-title">参与进来</h2>
					
						<a class="link" href="https://github.com/sofastack/sofastack.tech/issues/new">反馈</a>
					
						<a class="link" href="https://github.com/sofastack/community">社区</a>
					
						<a class="link" href="https://github.com/sofastack/sofastack.tech/wiki">Wiki</a>
					
						<a class="link" href="mailto:sofa@alipay.cloud.com">Email</a>
					
						<a class="link" href="/hr/">加入我们</a>
					
				</div>
			
				<div class="cate">
					<h2 class="cate-title">蚂蚁集团开源项目</h2>
					
						<a class="link" href="https://ant.design/">Ant Design</a>
					
						<a class="link" href="https://eggjs.org/">Egg </a>
					
						<a class="link" href="https://sqlflow.org">SQLFlow</a>
					
						<a class="link" href="https://tech.antfin.com/open-source">更多</a>
					
				</div>
			
		</div>
		<div class="qrcode">
			
				<div>
					<img class="qrcode-img" src="/sofastack.tech/img/qrcode/qrcode_video_2024.jpg" />
					<p class="qrcode-desc">微信视频号</p>
				</div>
			
				<div>
					<img class="qrcode-img" src="/sofastack.tech/img/qrcode/qrcode_1_2024.jpg" />
					<p class="qrcode-desc">微信公众号</p>
				</div>
			
				<div>
					<img class="qrcode-img" src="/sofastack.tech/img/qrcode/dingtalk_qrcode_20241118.png" />
					<p class="qrcode-desc">钉钉群</p>
				</div>
			
		</div>
	</div>
	<div class="copyright">
		<p>
			© 2018 - 2022  The SOFAStack Authors
			<a href="http://beian.miit.gov.cn/">浙 ICP 备 16045294 号-3</a>
		</p>
	</div>
</footer>

</body>

</html>